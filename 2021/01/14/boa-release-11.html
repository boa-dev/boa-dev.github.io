<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Boa release v0.11 - Boa</title>
    <meta name="description" content="The Boa JavaScript engine">
    <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml" />
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/center-img.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="canonical" href="https://boajs.dev/2021/01/14/boa-release-11.html">
    <link rel="shortcut icon" href="/favicon-32x32.png">
    <meta property="og:image" content="/images/logo.png" />
    <meta property="og:description" content="The Boa JavaScript engine" />
    <meta property="og:title" content="" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@boa_engine" />
    <meta name="twitter:title" content="" />
    
    <meta name="twitter:description" content="The Boa JavaScript engine" />
    
    <meta name="twitter:url" content="/2021/01/14/boa-release-11.html">
    <script defer src="https://unpkg.com/mermaid@10.2.3/dist/mermaid.min.js"></script>
    <noscript>
        <style>
            .site-switch-theme {display:none;}
        </style>
    </noscript>
</head>


  <body>
    <header class="site-header">
  <script type="text/javascript">
    // By calling this on DOM Ready rather than window.load means we should have our
    // preferred color and classes set before the user sees the page (no flash)
    document.addEventListener("DOMContentLoaded", () => {
      detectColorScheme();
    });

    function applyTheme() {
      const checkbox = window.document.getElementById("toggleTheme");
      window.document.getElementsByTagName(
        "html"
      )[0].className = window.document.getElementById("toggleTheme").checked
        ? "dark"
        : "default";
      localStorage.setItem(
        "theme",
        window.document.getElementsByTagName("html")[0].className
      );
    }

    //determines if the user has a set theme
    function detectColorScheme() {
      let theme = "default"; //default to light

      //local storage is used to override OS theme settings
      if (localStorage.getItem("theme")) {
        theme = localStorage.getItem("theme");
      } else if (!window.matchMedia) {
        //matchMedia method not supported
        return false;
      } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        //OS theme setting detected as dark
        theme = "dark";
      }

      //dark theme preferred, set document with a `data-theme` attribute
      window.document.getElementsByTagName("html")[0].className = theme;
      localStorage.setItem("theme", theme);
      if (theme === "dark") {
        window.document.getElementById("toggleTheme").checked = true;
      }
    }
  </script>
  <div class="wrapper">
    <a class="site-title" href="/">
      <img id="site-logo" src="/images/logo.png" /> Boa</a>

    <nav class="site-nav">
      <div class="trigger">
        <a href="/about">About</a> |
        <a href="https://github.com/boa-dev/boa">Github</a> |
        <a href="/boa/dev/bench/">Benchmarks</a> |
        <a href="/boa/test262/">Conformance</a> |
        <a href="/boa/playground">Playground</a> |
        <a href="https://docs.rs/boa_engine">Docs</a>
      </div>
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper"><div class="post">

  <header class="post-header">
    <h1 class="post-title">Boa release v0.11</h1>
    <p class="post-meta">Jan 14, 2021 • Boa Developers</p>
  </header>

  <article class="post-content">
    <p>Boa has reached a new release. v0.11, our biggest one yet!</p>
<p>Since v0.10 we've closed 77 issues and merged 129 pull requests. The engine has been faster and more compliant to the spec. Below are some of the highlights but please see the <a href="https://github.com/boa-dev/boa/blob/main/CHANGELOG.md#0110-2021-01-14">changelog</a> for more information.</p>
<p>What is Boa? See the <a href="/about">About</a> page for more info.</p>
<h2>Test 262</h2>
<p>Test262 is the implementation conformance test suite maintained by TC39. It's used by nearly all engines to measure how conformant they are to the specification. Boa pulls the tests in-tree and runs them against all PRs. You can find more about Test262 <a href="https://github.com/tc39/test262">here</a>.</p>
<p>Since v0.10 we have almost doubled on spec conformance, and reduced panics. A year ago Boa didn't even track itself against Test262 so it was difficult to know how compliant we were to the spec, today not only do we track all changes against Test262 but we can see progress on a PR to PR basis.</p>
<img class="light" src="/images/2021-01-14/conformance_light.png" />
<img class="dark" src="/images/2021-01-14/conformance_dark.png" />
<p>Previously many tests failed to run as the test-runner was still being worked on. Those issues have been fixed and our tests jumped from 38k to 78K which is why the graph flips up above. Boa should never panic, however we've had many tests reveal areas where panics happen, this has helped us identify and apply correct fixes, to the point where our panics have gone from hundreds to under 50 (the graph above shows the dark red diminishing).</p>
<p>For live tracking of conformance tests you can check <a href="https://boa-dev.github.io/boa/test262/">here</a>. Below is a snapshot of the previous version and today.</p>
<div class="row" style="display: flex; justify-content: space-around;">
        <section class="col-md-4" style="" id="version-latest"><div class="card"><div class="card-body"><h3>v0.10:</h3><ul class="list-group list-group-flush"><li class="list-group-item">Total tests: <span class="total-tests">38,706</span></li><li class="list-group-item">Passed tests: <span class="passed-tests">6,960</span></li><li class="list-group-item">Ignored tests: <span class="ignored-tests">5,748</span></li><li class="list-group-item">Failed tests: <span class="failed-tests">25,998</span></li><li class="list-group-item">Conformance: <b>17.98%</b></li></ul><div class="info-link"><a class="card-link" href="#"><span class="info-link"></span></a></div></div></div></section>
        <section class="col-md-4" style="" id="master-latest"><div class="card"><div class="card-body"><h3>v0.11:</h3><ul class="list-group list-group-flush"><li class="list-group-item">Total tests: <span class="total-tests">78,497</span></li><li class="list-group-item">Passed tests: <span class="passed-tests">24,550</span></li><li class="list-group-item">Ignored tests: <span class="ignored-tests">15,585</span></li><li class="list-group-item">Failed tests: <span class="failed-tests">38,362 (24 ⚠)</span></li><li class="list-group-item">Conformance: <b>31.28%</b></li></ul><div class="info-link"><a class="card-link" href="#"><span class="info-link"></span></a></div></div></div></section>
        <section class="col-md-4" style="display: none" id="old-versions"></section>
</div>
<h2>Regress</h2>
<p>In this release Boa switched from its own implementation (wrapping <code>regex</code>) to the <a href="https://github.com/ridiculousfish/regress"><code>regress</code></a> engine for regular expressions. Regress is a crate aiming to implement ECMAScript compliant regular expressions and Boa makes use of (and contributes back to) that.</p>
<p>While Regress is not 100% spec compliant this is something which is being worked on, also the switch gave us quite a performance boost in our <a href="https://boa-dev.github.io/boa/dev/bench/">benchmarks</a> we're seeing almost 6X faster execution.</p>
<img class="light" src="/images/2021-01-14/regex-bench-white.png" />
<img class="dark" src="/images/2021-01-14/regex-bench-dark.png" />
<p>The above image shows a big drop in the middle of the graph, above <code>fb1b8d5</code> is where we switched over. Conformance went from 19.01% to 18.99% and introduced some panics, however many of those have since been fixed.</p>
<h2>Iterating over bytes</h2>
<p>Previously the lexer iterated over unicode chars (u32 code points), this wasn't strictly neccesary for Boa and we have instead changed the lexer to work over bytes (u8). Iterating over bytes rather than chars is inherently much faster, non-ascii UTF8 bytes are all &gt;=128, and we might only really care about those being correct when parsing idents. This is standard practise amongs lexical analyzers and even browsers read source code byte-by-byte, using the rules of the language's syntax to convert the source text into tokens.</p>
<p>This was worked on by @jevancc and his <a href="https://github.com/boa-dev/boa/pull/915/files">changes</a> have improved performance overall.</p>
<h2>Embedding examples</h2>
<p>We are still working on what the public API should look like, some of these decisions are driven by feedback and the ever-changing way which Boa works.<br>
Not only you can run Boa against javascript today you can also embed your own objects and classes into the engine before it's ran.</p>
<p>We've offered an <a href="https://github.com/boa-dev/boa/blob/main/boa/examples/classes.rs">example</a> to show how a class can be constructed in Rust then added to the environment before executing your scripts.
This should offer a great insight into how you can interop Rust with JavaScript by using Boa.</p>
<p>Below are some of the more recent functions available from the Context object for you to add your own functionality.</p>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// Rust implementation of a function injected into the environment</span>
<span class="token class-name">Context</span><span class="token punctuation">::</span><span class="token function">register_global_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">// Rust implementation of a class injected into the environment</span>
<span class="token class-name">Context</span><span class="token punctuation">::</span><span class="token function">register_global_class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">// Rust implementation of a property injected into the environment</span>
<span class="token class-name">Context</span><span class="token punctuation">::</span><span class="token function">register_global_property</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>If there are any examples you would like added, please raise an issue on the main repository.</p>
<h2>Generating bytecode</h2>
<p>Today Boa walks the tree of the AST, although easy to implement it's not ideal for performance.<br>
We are looking to do code generation which can then be interpreted. This gradual process may happen over many releases until at some point we can switch implementations under the hood. Our steps are:</p>
<ul>
<li><s>Experiment with VM Path on isolated branch</s></li>
<li><s>Experiment with generating more simpler instructions</s></li>
<li>Build up parity with current implementation</li>
<li>Run test suite over VM path including conformance tests</li>
<li>Switch over once performance is steady</li>
<li>Optimize code generation and intreperter</li>
</ul>
<h2>Thank You</h2>
<p>Everything in this release has been such a huge effort, we want to thank all the <a href="https://github.com/boa-dev/boa/graphs/contributors?from=2020-10-02&amp;to=2021-01-12&amp;type=c">contributors</a> in this release, whether it was features, fixes or raising bugs.</p>
<p>If you're interested in contributing to Boa, we have some <a href="https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">&quot;good first issues&quot;</a> and <a href="https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22">&quot;issues where help is wanted&quot;</a>.</p>

  </article>

</div>
</div>
    </div>

    <script
      fetchpriority="low"
      defer
      src="https://opencollective.com/boa/banner.js"
    ></script>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-4">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/boa-dev">
              <span class="icon icon--github">
                <svg viewBox="0 0 16 16">
                  <path
                    fill="#828282"
                    d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"
                  />
                </svg>
              </span>

              <span class="username">boa-dev</span>
            </a>
          </li>
           
          <li>
            <a href="https://twitter.com/boa_engine">
              <span class="icon icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path
                    fill="#828282"
                    d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"
                  />
                </svg>
              </span>

              <span class="username">boa_engine</span>
            </a>
          </li>
           
          <li>
            <a rel="me" href="https://fosstodon.org/@boa_engine">
              <span class="icon icon--mastodon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mastodon" viewBox="0 0 16 16">
                  <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
                </svg>
              </span>

              <span class="username">@boa_engine@fosstodon.org</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-4">
        <p class="text">The Boa JavaScript engine</p>
      </div>

      <div class="footer-col footer-col-4">
        <div class="toggle-mode">
          <div class="icon">
            <i class="font font-sun-o" aria-hidden="true"></i>
          </div>
          <div class="toggle-switch">
            <label class="switch" title="Toggle Light/Dark Mode">
              <input
                type="checkbox"
                role="switch"
                id="toggleTheme"
                onclick="applyTheme()"
              />
              <div class="slider round"></div>
            </label>
          </div>
          <div class="icon">
            <i class="font font-moon-o" aria-hidden="true"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

    <script>
      window.addEventListener("load", () => {
        mermaid.initialize({ startOnLoad: true });
      });
    </script>
  </body>
</html>
