<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Boa</title>
  <description>The blog and website for Boa</description>
  <link href="https://boa-dev.github.io/feed.xml" rel="self"/>
  <link href="https://boa-dev.github.io/"/>
  <updated>2023-04-21T00:44:01Z</updated>
  <id>https://boa-dev.github.io/</id>
  <author>
    <name>Boa Developers</name>
  </author>
  
  <entry>
    <title>Boa v0.9: measureme &amp; optimisations</title>
    <link href="https://boa-dev.github.io/2020/07/03/boa-release-09.html"/>
    <updated>2020-07-03T00:00:00Z</updated>
    <id>https://boa-dev.github.io/2020/07/03/boa-release-09.html</id>
    <content type="html">&lt;p&gt;Hello World!&lt;/p&gt;
&lt;p&gt;Boa is an experimental Javascript lexer, parser and compiler written in Rust. It has support for some of the language, can be embedded in Rust projects fairly easily and also used from the command line.&lt;br /&gt;
Boa also exists to serve as a Rust implementation of the EcmaScript specification, there will be areas where we can utilise Rust and its fantastic ecosystem to make a fast, concurrent and safe engine.&lt;/p&gt;
&lt;p&gt;Today we&#39;re pleased to announce our latest release, version 0.9.&lt;br /&gt;
v0.9 is by far the biggest release we&#39;ve had since Boa began. You can find the full changes from the &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CHANGELOG.md#-090-2020-06-25---move-to-organisation-78-faster-execution-time&quot;&gt;changelog&lt;/a&gt;. The milestone behind this version was further optimisation and an increase in new features. We can show you how we can identify areas that can be optimised.&lt;/p&gt;
&lt;h2&gt;Better tooling for profiling&lt;/h2&gt;
&lt;p&gt;Boa became the first Rust project to make use of &lt;a href=&quot;https://github.com/rust-lang/measureme&quot;&gt;measureme&lt;/a&gt;, a profiling tool built from the ground up for Rust. This was only used by the Rust team themselves to profile the compiler. We managed to work with the compiler team to get the framework in a good enough state to be used by other projects too, and in this release, we gave it a try.&lt;/p&gt;
&lt;p&gt;Measure me lets you profile various areas of your choosing, then you can generate a trace file which can be loaded into Chromium or various other tools for analysis.
We took it for a spin (which you&#39;ll see in Object Specialization).&lt;/p&gt;
&lt;p&gt;Below is an example of our trace, this is using a measureme tool called &lt;code&gt;summarize&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+----------------------------+-----------+-----------------+----------+------------+
| Item                       | Self time | % of total time | Time     | Item count |
+----------------------------+-----------+-----------------+----------+------------+
| From&amp;lt;Object&amp;gt;               | 1.04ms    | 14.776          | 1.04ms   | 146        |
+----------------------------+-----------+-----------------+----------+------------+
| new_object                 | 356.50µs  | 5.082           | 533.50µs | 18         |
+----------------------------+-----------+-----------------+----------+------------+
| create_instrinsics         | 263.50µs  | 3.756           | 6.38ms   | 1          |
+----------------------------+-----------+-----------------+----------+------------+
| make_builtin_fn: toString  | 218.50µs  | 3.114           | 290.50µs | 12         |
+----------------------------+-----------+-----------------+----------+------------+
| String                     | 81.60µs   | 1.163           | 961.60µs | 1          |
+----------------------------+-----------+-----------------+----------+------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can read more about Rust&#39;s usage of measureme &lt;a href=&quot;https://blog.rust-lang.org/inside-rust/2020/02/25/intro-rustc-self-profile.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Object Specialization&lt;/h2&gt;
&lt;p&gt;In JavaScript internal metadata for objects are stored in &lt;code&gt;internal slots&lt;/code&gt;. In Boa we stored internal slots as a hashmap tied to the object, with the keys being strings and the values as &lt;a href=&quot;https://github.com/boa-dev/boa/blob/73f65f7800917c92f86134eaa21751c1ca93d986/boa/src/builtins/value/mod.rs#L57-L78&quot;&gt;&lt;code&gt;JSValues&lt;/code&gt;&lt;/a&gt;. This meant we needed to constantly unwrap them into a Rust primitive to access the data. Secondly we were restricted as to what type of data we could put in internal slots. For example, lets say we want to implement &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set&quot;&gt;&lt;code&gt;Set&lt;/code&gt;&lt;/a&gt; by using the native &lt;a href=&quot;https://doc.rust-lang.org/std/collections/struct.HashSet.html&quot;&gt;&lt;code&gt;HashSet&lt;/code&gt;&lt;/a&gt; as a backing store, this would not be possible.&lt;/p&gt;
&lt;p&gt;By changing how internal data is handled for some of our builtin objects and removing a whole bunch of redundant access checks, we managed to speed up the interpreter.&lt;/p&gt;
&lt;p&gt;Boa would spend a significant amount of time converting back and forth between JS Values and primitive values. We found a huge amount of time was spent in &lt;code&gt;Value::set_field&lt;/code&gt; before any code had even been executed. &lt;code&gt;set_field&lt;/code&gt; was slow due to the amount of updating of internal slots as part of setting up. Here you can see realm creation takes roughly 60ms (dev build).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;We use &lt;a href=&quot;https://github.com/rust-lang/measureme/blob/main/crox/Readme.md&quot;&gt;Crox&lt;/a&gt; to convert our measureme data into a format Chrome&#39;s performance tab understands&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://boa-dev.github.io/images/2020-07-03/before.png&quot; alt=&quot;Before&quot; /&gt;&lt;/p&gt;
&lt;p&gt;We refactored many builtins to hold an &lt;code&gt;ObjectData&lt;/code&gt; enum variant instead, some of which can hold a value for the type also.
This can be used to both identify objects and to use their internal data.&lt;br /&gt;
Here is an example of our enum.&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/// Defines the different types of objects.&lt;/span&gt;
&lt;span class=&quot;token attribute attr-name&quot;&gt;#[derive(Debug, Trace, Finalize, Clone)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;ObjectData&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;BigInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RcBigInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RcString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RcSymbol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Ordinary&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://boa-dev.github.io/images/2020-07-03/after.png&quot; alt=&quot;After&quot; /&gt;&lt;/p&gt;
&lt;p&gt;This gave us a 70% speedup and reduced startup time by well over half. The &lt;code&gt;realm::create&lt;/code&gt; function now runs in 13ms instead of 60ms.&lt;/p&gt;
&lt;h2&gt;Optimised Type Comparisons&lt;/h2&gt;
&lt;p&gt;If you&#39;ve ever called &lt;code&gt;typeof&lt;/code&gt; in JavaScript, you get a string value describing the primitive type of it&#39;s argument. Boa was doing the same internally for comparing (using the &amp;quot;get_type()&amp;quot; call), however getting the string value from each primitive then comparing them is not very performant.&lt;br /&gt;
Now, thanks to @Lan2u we have a rust &lt;a href=&quot;https://github.com/boa-dev/boa/blob/8f8498eac17164c8de2f599bd0b7ba2e8053ec30/boa/src/builtins/value/val_type.rs#L4-L17&quot;&gt;&lt;code&gt;Type&lt;/code&gt;&lt;/a&gt; enum which makes comparing more efficient and on average brings another 8% performance boost.&lt;/p&gt;
&lt;h2&gt;JSValue Refactor&lt;/h2&gt;
&lt;p&gt;We have completely refactored how JavaScript values are stored.&lt;br /&gt;
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/498&quot;&gt;#498&lt;/a&gt; makes values more lightweight by only GC&#39;ing objects and not the primitives. The primitive scalar values are just Rust primitives which implement the Copy trait, so the overhead of moving these around is much lower.&lt;br /&gt;
By decoupling our &lt;code&gt;Value&lt;/code&gt; types and &lt;code&gt;GC&lt;/code&gt; types we have brought our &lt;code&gt;Value&lt;/code&gt; size from 40 bytes =&amp;gt; 24 bytes and an 80% reduction in arithmetic operations!&lt;/p&gt;
&lt;h2&gt;Parser rebuild, better code organisation&lt;/h2&gt;
&lt;p&gt;Boa was predominantly 3 files. The lexer, parser and interpreter.&lt;br /&gt;
The naive implementation of the parser was a &lt;a href=&quot;https://github.com/boa-dev/boa/blob/c23a7b1f4ac57af6c5f0b9f6c98fbbed7a14c98f/src/lib/syntax/parser.rs&quot;&gt;single file&lt;/a&gt; which had a long match expression for tokens and went through every token figuring out what to do. This did the job but became unmaintainable when adding new features.&lt;br /&gt;
We have been breaking the parser up into separate modules, which represent various expressions and statements that conform to the specification. (more about this in a future post).&lt;/p&gt;
&lt;p&gt;After all the fixes in this release we&#39;ve seen on average a 70% improvement, we still have areas where we plan to improve. We are currently rebuilding the lexer so it is more broken up like the parser and interpreter, we will blog about this soon in future.&lt;/p&gt;
&lt;h2&gt;Roadmap&lt;/h2&gt;
&lt;h3&gt;&lt;em&gt;How much of the specification is covered?&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Our next milestone is to tidy up the lexer so it takes into account &lt;a href=&quot;https://tc39.es/ecma262/#sec-context-free-grammars&quot;&gt;&lt;code&gt;goal symbols&lt;/code&gt;&lt;/a&gt; then we plan to start running Test 262, the official ECMAScript Test Suite. It has a lot of tests (over 29272 test files) and will tell us in detail which parts of the specification need work.&lt;br /&gt;
There are also large items like classes which are still not covered, however, these should now be easier to implement with parsing broken up.&lt;/p&gt;
&lt;h3&gt;&lt;em&gt;Public API&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/boa-dev/boa/issues/445&quot;&gt;#445&lt;/a&gt; looks to improve the public API too so Rust projects can interactive with Boa more easily.&lt;br /&gt;
It should be possible today to just use the lexer, parser or the whole execution path.&lt;/p&gt;
&lt;p&gt;We hope to add more detail in future on how some parts of Boa work, make sure you stay tuned for any future posts!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.10</title>
    <link href="https://boa-dev.github.io/2020/10/02/boa-release-10.html"/>
    <updated>2020-10-02T00:00:00Z</updated>
    <id>https://boa-dev.github.io/2020/10/02/boa-release-10.html</id>
    <content type="html">&lt;p&gt;Boa is an experimental Javascript lexer, parser and compiler written in Rust. It has support for some of the language, can be embedded in Rust projects fairly easily and also used from the command line.
Boa also exists to serve as a Rust implementation of the EcmaScript specification, there will be areas where we can utilise Rust and its fantastic ecosystem to make a fast, concurrent and safe engine.&lt;/p&gt;
&lt;p&gt;We have a long way to go, however v0.10 has been the biggest release to date, with 138 issues closed!&lt;/p&gt;
&lt;p&gt;We have some highlights, but if you prefer to read the full changelog, you can do that &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CHANGELOG.md&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Test262&lt;/h2&gt;
&lt;p&gt;One question we&#39;ve been asked for a long time is &amp;quot;how conformant are you to the spec?&amp;quot;. It&#39;s been tough to answer as we&#39;ve been unable to run against the official test suite.&lt;/p&gt;
&lt;p&gt;Test262 is the official ECMAScript Test Suite and exists to provide conformance tests for the latest drafts of the Ecma specification. It is used for all engines, you can even run it in your &lt;a href=&quot;https://bakkot.github.io/test262-web-runner/&quot;&gt;browser&lt;/a&gt;.&lt;br /&gt;
Thanks to @Razican in v0.10 we now have a test harness that allows us to run it against Boa at any time.&lt;/p&gt;
&lt;p&gt;This is a new crate inside the Boa repository that can parse through all of the tests (roughly 40,000 of them) in under 10 minutes and tell us how conformant we are.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://boa-dev.github.io/images/2020-10-02/test262-screenshot.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Today Boa has &lt;span class=&quot;x x-first x-last&quot;&gt;18&lt;/span&gt;% conformity to the specification. We&#39;ll be keeping an eye on this number over the releases. We expect to achieve around 30% by 0.11 due to some of the fixes we&#39;re adding which should pass a few thousand tests.&lt;/p&gt;
&lt;p&gt;These are run via Github Actions against PRs and for our main branch so that we can keep track of where we are and if there are regressions.&lt;/p&gt;
&lt;h2&gt;Built-ins&lt;/h2&gt;
&lt;p&gt;We&#39;ve added support for &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date&quot;&gt;&lt;code&gt;Date&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map&quot;&gt;&lt;code&gt;Map&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol&quot;&gt;well-known symbols&lt;/a&gt;. Supporting Well-known symbols unblocks a lot of work around adding &lt;code&gt;@@iterators&lt;/code&gt; to some of our global objects which is coming up in the next release.&lt;br /&gt;
Both &lt;code&gt;Math&lt;/code&gt; and &lt;code&gt;Number&lt;/code&gt; have had their remaining methods implemented.&lt;/p&gt;
&lt;h2&gt;Lexer&lt;/h2&gt;
&lt;p&gt;The lexer has been rebuilt from scratch. Just like the old parser it was a single file before looping through and becoming unmaintainable. Today we&#39;ve reorganised it into separate modules which know how to lex certain areas. The new lexer &lt;a href=&quot;https://github.com/boa-dev/boa/issues/294&quot;&gt;now supports goal symbols&lt;/a&gt; and can now tokenize with the correct context at any time.&lt;/p&gt;
&lt;h3&gt;Goal Symbols&lt;/h3&gt;
&lt;p&gt;Our issue with goal symbols is explained by the V8 team:
&lt;a href=&quot;https://v8.dev/blog/understanding-ecmascript-part-3#lexical-grammar&quot;&gt;https://v8.dev/blog/understanding-ecmascript-part-3#lexical-grammar&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Previously we weren&#39;t distinguishing between the contexts where some input elements are permitted and some are not, so lexing &lt;code&gt;/&lt;/code&gt; would yeild a &lt;code&gt;division&lt;/code&gt; symbols when it should be a &lt;code&gt;RegularExpressionLiteral&lt;/code&gt; for example. This change unblocked us being able to run Test262.&lt;/p&gt;
&lt;p&gt;Performance wise it is much faster for larger files. The lexer is far more efficient at streaming tokens to the parser than previously so in some scenarios we have big gains.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;You can see all the benchmarks &lt;a href=&quot;https://boa-dev.github.io/boa/dev/bench/&quot;&gt;here&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Repl syntax highlighting&lt;/h2&gt;
&lt;p&gt;Syntax highlighting was added to the repl this release thanks to @HalidOdat&lt;br /&gt;
Our repl is made possible due to the great work of &lt;a href=&quot;https://github.com/kkawakam/rustyline&quot;&gt;RustyLine&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://boa-dev.github.io/images/2020-10-02/syntaxHighlighting.gif&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;Looking forward&lt;/h2&gt;
&lt;p&gt;There are plenty of fixes and performance changes still needed, we also hope to experiment with producing Bytecode from our AST in future. Test262 coverage will almost certainly increase, and we are polishing the public API for easier use when embedding into other Rust projects.&lt;/p&gt;
&lt;p&gt;Thanks to all those who contributed to 0.10, you can see the names in the full changelog linked above.&lt;/p&gt;
&lt;p&gt;You can checkout Boa via &lt;a href=&quot;https://github.com/boa-dev/boa&quot;&gt;Github&lt;/a&gt; or on &lt;a href=&quot;https://crates.io/crates/Boa&quot;&gt;crates.io&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.11</title>
    <link href="https://boa-dev.github.io/2021/01/14/boa-release-11.html"/>
    <updated>2021-01-14T00:00:00Z</updated>
    <id>https://boa-dev.github.io/2021/01/14/boa-release-11.html</id>
    <content type="html">&lt;p&gt;Boa has reached a new release. v0.11, our biggest one yet!&lt;/p&gt;
&lt;p&gt;Since v0.10 we&#39;ve closed 77 issues and merged 129 pull requests. The engine has been faster and more compliant to the spec. Below are some of the highlights but please see the &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CHANGELOG.md#0110-2021-01-14&quot;&gt;changelog&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;What is Boa? See the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;About&lt;/a&gt; page for more info.&lt;/p&gt;
&lt;h2&gt;Test 262&lt;/h2&gt;
&lt;p&gt;Test262 is the implementation conformance test suite maintained by TC39. It&#39;s used by nearly all engines to measure how conformant they are to the specification. Boa pulls the tests in-tree and runs them against all PRs. You can find more about Test262 &lt;a href=&quot;https://github.com/tc39/test262&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Since v0.10 we have almost doubled on spec conformance, and reduced panics. A year ago Boa didn&#39;t even track itself against Test262 so it was difficult to know how compliant we were to the spec, today not only do we track all changes against Test262 but we can see progress on a PR to PR basis.&lt;/p&gt;
&lt;img class=&quot;light&quot; src=&quot;https://boa-dev.github.io/images/2021-01-14/conformance_light.png&quot; /&gt;
&lt;img class=&quot;dark&quot; src=&quot;https://boa-dev.github.io/images/2021-01-14/conformance_dark.png&quot; /&gt;
&lt;p&gt;Previously many tests failed to run as the test-runner was still being worked on. Those issues have been fixed and our tests jumped from 38k to 78K which is why the graph flips up above. Boa should never panic, however we&#39;ve had many tests reveal areas where panics happen, this has helped us identify and apply correct fixes, to the point where our panics have gone from hundreds to under 50 (the graph above shows the dark red diminishing).&lt;/p&gt;
&lt;p&gt;For live tracking of conformance tests you can check &lt;a href=&quot;https://boa-dev.github.io/boa/test262/&quot;&gt;here&lt;/a&gt;. Below is a snapshot of the previous version and today.&lt;/p&gt;
&lt;div class=&quot;row&quot; style=&quot;display: flex; justify-content: space-around;&quot;&gt;
        &lt;section class=&quot;col-md-4&quot; style=&quot;&quot; id=&quot;version-latest&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;card-body&quot;&gt;&lt;h3&gt;v0.10:&lt;/h3&gt;&lt;ul class=&quot;list-group list-group-flush&quot;&gt;&lt;li class=&quot;list-group-item&quot;&gt;Total tests: &lt;span class=&quot;total-tests&quot;&gt;38,706&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Passed tests: &lt;span class=&quot;passed-tests&quot;&gt;6,960&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Ignored tests: &lt;span class=&quot;ignored-tests&quot;&gt;5,748&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Failed tests: &lt;span class=&quot;failed-tests&quot;&gt;25,998&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Conformance: &lt;b&gt;17.98%&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;info-link&quot;&gt;&lt;a class=&quot;card-link&quot; href=&quot;https://boa-dev.github.io/2021/01/14/boa-release-11.html#&quot;&gt;&lt;span class=&quot;info-link&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
        &lt;section class=&quot;col-md-4&quot; style=&quot;&quot; id=&quot;master-latest&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;card-body&quot;&gt;&lt;h3&gt;v0.11:&lt;/h3&gt;&lt;ul class=&quot;list-group list-group-flush&quot;&gt;&lt;li class=&quot;list-group-item&quot;&gt;Total tests: &lt;span class=&quot;total-tests&quot;&gt;78,497&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Passed tests: &lt;span class=&quot;passed-tests&quot;&gt;24,550&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Ignored tests: &lt;span class=&quot;ignored-tests&quot;&gt;15,585&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Failed tests: &lt;span class=&quot;failed-tests&quot;&gt;38,362 (24 ⚠)&lt;/span&gt;&lt;/li&gt;&lt;li class=&quot;list-group-item&quot;&gt;Conformance: &lt;b&gt;31.28%&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;info-link&quot;&gt;&lt;a class=&quot;card-link&quot; href=&quot;https://boa-dev.github.io/2021/01/14/boa-release-11.html#&quot;&gt;&lt;span class=&quot;info-link&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
        &lt;section class=&quot;col-md-4&quot; style=&quot;display: none&quot; id=&quot;old-versions&quot;&gt;&lt;/section&gt;
&lt;/div&gt;
&lt;h2&gt;Regress&lt;/h2&gt;
&lt;p&gt;In this release Boa switched from its own implementation (wrapping &lt;code&gt;regex&lt;/code&gt;) to the &lt;a href=&quot;https://github.com/ridiculousfish/regress&quot;&gt;&lt;code&gt;regress&lt;/code&gt;&lt;/a&gt; engine for regular expressions. Regress is a crate aiming to implement ECMAScript compliant regular expressions and Boa makes use of (and contributes back to) that.&lt;/p&gt;
&lt;p&gt;While Regress is not 100% spec compliant this is something which is being worked on, also the switch gave us quite a performance boost in our &lt;a href=&quot;https://boa-dev.github.io/boa/dev/bench/&quot;&gt;benchmarks&lt;/a&gt; we&#39;re seeing almost 6X faster execution.&lt;/p&gt;
&lt;img class=&quot;light&quot; src=&quot;https://boa-dev.github.io/images/2021-01-14/regex-bench-white.png&quot; /&gt;
&lt;img class=&quot;dark&quot; src=&quot;https://boa-dev.github.io/images/2021-01-14/regex-bench-dark.png&quot; /&gt;
&lt;p&gt;The above image shows a big drop in the middle of the graph, above &lt;code&gt;fb1b8d5&lt;/code&gt; is where we switched over. Conformance went from 19.01% to 18.99% and introduced some panics, however many of those have since been fixed.&lt;/p&gt;
&lt;h2&gt;Iterating over bytes&lt;/h2&gt;
&lt;p&gt;Previously the lexer iterated over unicode chars (u32 code points), this wasn&#39;t strictly neccesary for Boa and we have instead changed the lexer to work over bytes (u8). Iterating over bytes rather than chars is inherently much faster, non-ascii UTF8 bytes are all &amp;gt;=128, and we might only really care about those being correct when parsing idents. This is standard practise amongs lexical analyzers and even browsers read source code byte-by-byte, using the rules of the language&#39;s syntax to convert the source text into tokens.&lt;/p&gt;
&lt;p&gt;This was worked on by @jevancc and his &lt;a href=&quot;https://github.com/boa-dev/boa/pull/915/files&quot;&gt;changes&lt;/a&gt; have improved performance overall.&lt;/p&gt;
&lt;h2&gt;Embedding examples&lt;/h2&gt;
&lt;p&gt;We are still working on what the public API should look like, some of these decisions are driven by feedback and the ever-changing way which Boa works.&lt;br /&gt;
Not only you can run Boa against javascript today you can also embed your own objects and classes into the engine before it&#39;s ran.&lt;/p&gt;
&lt;p&gt;We&#39;ve offered an &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/boa/examples/classes.rs&quot;&gt;example&lt;/a&gt; to show how a class can be constructed in Rust then added to the environment before executing your scripts.
This should offer a great insight into how you can interop Rust with JavaScript by using Boa.&lt;/p&gt;
&lt;p&gt;Below are some of the more recent functions available from the Context object for you to add your own functionality.&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Rust implementation of a function injected into the environment&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Rust implementation of a class injected into the environment&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Rust implementation of a property injected into the environment&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_property&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If there are any examples you would like added, please raise an issue on the main repository.&lt;/p&gt;
&lt;h2&gt;Generating bytecode&lt;/h2&gt;
&lt;p&gt;Today Boa walks the tree of the AST, although easy to implement it&#39;s not ideal for performance.&lt;br /&gt;
We are looking to do code generation which can then be interpreted. This gradual process may happen over many releases until at some point we can switch implementations under the hood. Our steps are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;s&gt;Experiment with VM Path on isolated branch&lt;/s&gt;&lt;/li&gt;
&lt;li&gt;&lt;s&gt;Experiment with generating more simpler instructions&lt;/s&gt;&lt;/li&gt;
&lt;li&gt;Build up parity with current implementation&lt;/li&gt;
&lt;li&gt;Run test suite over VM path including conformance tests&lt;/li&gt;
&lt;li&gt;Switch over once performance is steady&lt;/li&gt;
&lt;li&gt;Optimize code generation and intreperter&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Thank You&lt;/h2&gt;
&lt;p&gt;Everything in this release has been such a huge effort, we want to thank all the &lt;a href=&quot;https://github.com/boa-dev/boa/graphs/contributors?from=2020-10-02&amp;amp;to=2021-01-12&amp;amp;type=c&quot;&gt;contributors&lt;/a&gt; in this release, whether it was features, fixes or raising bugs.&lt;/p&gt;
&lt;p&gt;If you&#39;re interested in contributing to Boa, we have some &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22&quot;&gt;&amp;quot;good first issues&amp;quot;&lt;/a&gt; and &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22&quot;&gt;&amp;quot;issues where help is wanted&amp;quot;&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.12</title>
    <link href="https://boa-dev.github.io/2021/06/07/boa-release-12.html"/>
    <updated>2021-06-07T00:00:00Z</updated>
    <id>https://boa-dev.github.io/2021/06/07/boa-release-12.html</id>
    <content type="html">&lt;p&gt;Boa v0.12 is here! Boa is a JavaScript parser, compiler and executor written in the Rust programming language. It makes it easy to embed a JS engine in your projects, and you can even use it from webassembly. See the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;About&lt;/a&gt; page for more info.&lt;/p&gt;
&lt;p&gt;We currently support part of the language. In this release, our conformance has grown to 33.97% of the official ECMAScript Test Suite (Test262). In this release, we have closed 19 issues and merged 69 pull requests. You can check the full list of changes &lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.12/CHANGELOG.md&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Let&#39;s dive into the most relevant changes of this release.&lt;/p&gt;
&lt;h2&gt;Panic-free&lt;/h2&gt;
&lt;p&gt;Boa now doesn&#39;t panic in any of the Test262 tests. This is a huge milestone, since it means that the engine itself can handle all of the edge cases. At least those proposed by the official ECMAScript test suite. We still recommend using &lt;a href=&quot;https://doc.rust-lang.org/stable/std/panic/fn.catch_unwind.html&quot;&gt;&lt;code&gt;std::panic::catch_unwind()&lt;/code&gt;&lt;/a&gt; to execute arbitrary code, though.&lt;/p&gt;
&lt;h2&gt;Conformance increase&lt;/h2&gt;
&lt;p&gt;In version 0.11 we were passing 31.59% of the Test262 suite. In this version, we have increased that coverage to &lt;strong&gt;33.97%&lt;/strong&gt;. The increase might not seem much, but we now pass 1,924 new tests.&lt;/p&gt;
&lt;p&gt;Our conformance tester has also been improved, and thanks to the new APIs available in the engine, we were able to add complex functionality such as &amp;quot;realm&amp;quot; creation, cross-real symbols and overall, the inclusion of a partially complete &lt;code&gt;$262&lt;/code&gt; object, ready for some testing.&lt;/p&gt;
&lt;p&gt;We have also added some useful lists of &amp;quot;fixed&amp;quot;, &amp;quot;broken&amp;quot;, &amp;quot;ignored&amp;quot; and &amp;quot;fixed panics&amp;quot; tests for each pull request. This will allow us to directly check individual tests on each PR and only re-run the new tests that are failing/panicking in order to properly fix them.&lt;/p&gt;
&lt;h2&gt;New built-in objects, &lt;code&gt;string&lt;/code&gt; improvements and &lt;code&gt;@@ToStringTag&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Boa now has support for the &lt;code&gt;Reflect&lt;/code&gt; and &lt;code&gt;Set&lt;/code&gt; built-in objects. This grows the posibilities of the engine to be used in more real-world projects. On the same lines, we have added support for the &lt;code&gt;GetOwnProperty&lt;/code&gt; for &lt;code&gt;string&lt;/code&gt;. This means that we can use &lt;code&gt;[{index}]&lt;/code&gt; to get the characters of a string. For example, &lt;code&gt;&amp;quot;hello&amp;quot;[0]&lt;/code&gt; will return &lt;code&gt;&amp;quot;h&amp;quot;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We have also added the &lt;code&gt;@@ToStringTag&lt;/code&gt; well known symbol to most of the built-in objects. You can now run the following code, for example, and get the expected result:&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Symbol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toStringTag&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Returns &quot;Map&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Thank you&lt;/h2&gt;
&lt;p&gt;Everything in this release has been such a huge effort, we want to thank all the &lt;a href=&quot;https://github.com/boa-dev/boa/graphs/contributors?from=2021-01-12&amp;amp;to=2021-06-07&amp;amp;type=c&quot;&gt;contributors&lt;/a&gt; in this release, whether it was features, fixes or raising bugs.&lt;/p&gt;
&lt;p&gt;If you&#39;re interested in contributing to Boa, we have some &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22&quot;&gt;&amp;quot;good first issues&amp;quot;&lt;/a&gt; and &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22&quot;&gt;&amp;quot;issues where help is wanted&amp;quot;&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.13</title>
    <link href="https://boa-dev.github.io/2021/09/30/boa-release-13.html"/>
    <updated>2021-09-30T00:00:00Z</updated>
    <id>https://boa-dev.github.io/2021/09/30/boa-release-13.html</id>
    <content type="html">&lt;p&gt;Boa v0.13 is here! Boa is a JavaScript engine written in the Rust programming language. It makes it easy to embed a JS engine in your projects, and you can even use it from webassembly. See the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;about&lt;/a&gt; page for more info.&lt;/p&gt;
&lt;p&gt;We currently support part of the language. In this release, our conformance has grown to 41.97% of the official ECMAScript Test Suite (Test262). We have closed 40 issues and merged 105 pull requests. You can check the full list of changes &lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.13/CHANGELOG.md&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This release brings some new features, such as support for calling Rust closures from JavaScript to improve better interopability between JS and Rust.&lt;/p&gt;
&lt;h2&gt;ECMAScript language features&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges&quot;&gt;named capture groups&lt;/a&gt; are now implemented and enabled.&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;RE_DATE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;(?&amp;lt;year&gt;[0-9]{4})-(?&amp;lt;month&gt;[0-9]{2})-(?&amp;lt;day&gt;[0-9]{2})&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; matchObj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;RE_DATE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1999-12-31&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; year &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; matchObj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1999&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; month &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; matchObj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;month&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 12&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; day &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; matchObj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;day&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 31&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This release brings support for the relative indexing method &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/at&quot;&gt;String.prototype.at()&lt;/a&gt;. This makes it easier to fetch values at the end of an array or string instead of doing &lt;code&gt;str[str.length - 1]&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sentence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;The quick brown fox jumps over the lazy dog.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Using an index of &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;index&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; the character returned is &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;sentence&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// expected output: &quot;Using an index of 5 the character returned is u&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Other implemented language features include destructoring assignments, &lt;code&gt;replaceAll()&lt;/code&gt;, &lt;code&gt;Object.values()&lt;/code&gt;, &lt;code&gt;Object.keys()&lt;/code&gt;, &lt;code&gt;Object.preventExtensions()&lt;/code&gt;, &lt;code&gt;splice()&lt;/code&gt;, &lt;code&gt;sort()&lt;/code&gt;, spreading objects and more.&lt;/p&gt;
&lt;h2&gt;Boa API&lt;/h2&gt;
&lt;h3&gt;Calling Rust closures from JavaScript&lt;/h3&gt;
&lt;p&gt;In addition to registering Rust functions as global JavaScript functions, our API has been expanded to register Rust closures. &lt;a href=&quot;https://docs.rs/Boa/0.13.0/boa/context/struct.Context.html#method.register_global_closure&quot;&gt;&lt;code&gt;register_global_closure&lt;/code&gt;&lt;/a&gt; allows to capture variables in closures that can be called from javascript:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; add_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_closure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;addOne&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;move&lt;/span&gt; &lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;_&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; argument &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;argument &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; add_value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;assert_eq!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;addOne(41)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;into&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To see the full capabilities of this feature, take a look at our &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/boa/examples/closures.rs&quot;&gt;examples&lt;/a&gt;. Thanks to @HalidOdat and @jedel1043 for their work on this.&lt;/p&gt;
&lt;h3&gt;Boa prelude&lt;/h3&gt;
&lt;p&gt;This release exposes a prelude of useful things that are already imported. This should make it more ergonomic to work with.&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;prelude&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// This would import all the commonly-used things&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JSValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3.1415&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; realm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Realm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Interpreter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;realm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; engine&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Math.PI&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Test 262&lt;/h2&gt;
&lt;p&gt;Test262 is the implementation conformance test suite maintained by TC39. It&#39;s used by nearly all engines to measure how conformant they are to the specification. Boa pulls the tests in-tree and runs them against all PRs.&lt;/p&gt;
&lt;p&gt;Since v0.12 we have managed to pass 6391 more tests and are 7% more conformant. This has been great progress by all involved and we hope this continues to improve. Most of these new passes have come from refactors across the codebase which have had little impact on performance, in fact, v0.13 is much faster than v0.12.&lt;/p&gt;
&lt;p&gt;You can track Boa&#39;s conformance to the specification &lt;a href=&quot;https://boa-dev.github.io/boa/test262/#&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Keeping up with Rust&lt;/h2&gt;
&lt;p&gt;Rust is changing underneath us. This means we need to make sure our code is conforming the latest standards and we&#39;re taking advantage of the best optimizations the language can provide. In order to do this we rely on Clippy, this is Rust&#39;s in-house linter. We updated our code to &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1352&quot;&gt;respect the latest Rust version&lt;/a&gt; and updated &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1356&quot;&gt;formatting&lt;/a&gt;. Often a nice bonus of doing this is getting performance improvements for free as Clippy gets more &amp;quot;smarter&amp;quot;. Thanks to @neeldug and @RageKnify for the work in this area.&lt;/p&gt;
&lt;h2&gt;Keeping things in order&lt;/h2&gt;
&lt;p&gt;Previously object properties were stored using &lt;a href=&quot;https://docs.rs/rustc-hash/1.1.0/rustc_hash/type.FxHashMap.html&quot;&gt;&lt;code&gt;FxHashMap&lt;/code&gt;&lt;/a&gt;. Despite being very fast it didn&#39;t offer any guarantees about the order. Properties need to retain the same order they were entered. In order to achieve this we switched over to &lt;a href=&quot;https://docs.rs/indexmap/1.7.0/indexmap/&quot;&gt;IndexMap&lt;/a&gt;. Traits in Rust make this easy as IndexMap was designed to be a drop-in replacement for other HashMap implementations by following the same Trait. Thanks to IndexMap offering the possibility to use alternative hashing algorithms, we could continue using the fast &lt;a href=&quot;https://docs.rs/rustc-hash/1.1.0/rustc_hash/struct.FxHasher.html&quot;&gt;&lt;code&gt;FxHasher&lt;/code&gt;&lt;/a&gt; algorithm from rustc. Performance losses were minimal on some benchmarks and we actually made some gains in others. Thanks to @raskad for their work on this&lt;/p&gt;
&lt;h2&gt;VM&lt;/h2&gt;
&lt;p&gt;There is still on-going work to utilise a VM, this is happening &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/docs/vm.md#state-of-play&quot;&gt;alongside&lt;/a&gt; how Boa runs today. Although its not exposed yet there has been plenty of refactorings to the VM in order to make it performant. Hopefully we can talk about this in more detail soon.&lt;/p&gt;
&lt;h2&gt;Opening up the discussion&lt;/h2&gt;
&lt;p&gt;As of this release Boa has begun to utilise Github&#39;s Discussions feature. You can catch more long-ranging projects &lt;a href=&quot;https://github.com/boa-dev/boa/discussions&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Thank You&lt;/h2&gt;
&lt;p&gt;This has been the biggest release yet, there have been many features and fixes. We want to thank all the &lt;a href=&quot;https://github.com/boa-dev/boa/graphs/contributors?from=2021-06-01&amp;amp;to=2021-09-26&amp;amp;type=c&quot;&gt;contributors&lt;/a&gt; in this release, whether it was features, fixes or raising bugs.&lt;/p&gt;
&lt;p&gt;If you&#39;re interested in contributing to Boa, we have some &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22&quot;&gt;&amp;quot;good first issues&amp;quot;&lt;/a&gt; and &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22&quot;&gt;&amp;quot;issues where help is wanted&amp;quot;&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.14</title>
    <link href="https://boa-dev.github.io/posts/2022-03-15-boa-release-14/"/>
    <updated>2022-03-15T00:00:00Z</updated>
    <id>https://boa-dev.github.io/posts/2022-03-15-boa-release-14/</id>
    <content type="html">&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Boa v0.14 is here! After almost 6 months of development, we are very happy to present you the newest release of the Boa
JavaScript engine. Boa makes it easy to embed a JS engine in your projects, and you can even use it from webassembly. See
the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;about&lt;/a&gt; page for more info. Together with this release, we present you: A new way to contribute to Boa, a virtual machine, usable examples and much more.&lt;/p&gt;
&lt;p&gt;Boa currently supports part of the JavaScript language. In this release, our conformance has grown from 41.01% to 49.74%
in the official ECMAScript Test Suite (Test262). The engine now passes 43,986 tests, coming from 33,192 in Boa 0.13
(32.5% increase), and we have closed 40 issues and merged 137 pull requests. You can check the full list of changes
&lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.14/CHANGELOG.md&quot;&gt;here&lt;/a&gt;, and the full information on conformance
&lt;a href=&quot;https://boa-dev.github.io/boa/test262/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Boa has moved&lt;/h2&gt;
&lt;p&gt;First off, some breaking changes!
Boa is now &lt;a href=&quot;https://crates.io/crates/boa_engine&quot;&gt;&lt;code&gt;boa_engine&lt;/code&gt;&lt;/a&gt; on crates.io. This should bring it in line with our other packages, and allows us to resolve the &lt;a href=&quot;https://github.com/boa-dev/boa/issues/230&quot;&gt;casing issue&lt;/a&gt; we had with Boa previously. It should just be a case of changing your dependencies in cargo.toml to the new destination. The old &lt;a href=&quot;https://crates.io/crates/boa&quot;&gt;&lt;code&gt;Boa&lt;/code&gt;&lt;/a&gt; crate will no longer receive any updates.&lt;/p&gt;
&lt;h2&gt;New ECMAScript features&lt;/h2&gt;
&lt;p&gt;Boa v0.14 ships with support for &lt;code&gt;Object.getOwnPropertyNames&lt;/code&gt;, &lt;code&gt;Object.getOwnPropertySymbols&lt;/code&gt;, &lt;code&gt;Object.prototype.hasOwnProperty&lt;/code&gt;, &lt;code&gt;Array.from&lt;/code&gt;, &lt;code&gt;AggregateError&lt;/code&gt;, &lt;code&gt;Typed Arrays&lt;/code&gt;, &lt;code&gt;Proxy&lt;/code&gt;, &lt;code&gt;toLocaleString()&lt;/code&gt;, &lt;code&gt;Symbol.prototype.valueOf&lt;/code&gt;, &lt;code&gt;Array.prototype.at()&lt;/code&gt;, &lt;code&gt;String.fromCharCode&lt;/code&gt;, &lt;code&gt;Object.hasOwn&lt;/code&gt;, &lt;code&gt;Object.fromEntries&lt;/code&gt;, &lt;code&gt;Proxy&lt;/code&gt;, &lt;code&gt;Array.prototype.findLast&lt;/code&gt;, &lt;code&gt;Array.prototype.findLastIndex&lt;/code&gt;, &lt;code&gt;console.trace&lt;/code&gt;, &lt;code&gt;String.raw( template, ...substitutions )&lt;/code&gt;, and &lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.14/CHANGELOG.md&quot;&gt;more&lt;/a&gt;. There&#39;s also been several bug fixes and internal improvements, such as &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1684&quot;&gt;switching to Bors&lt;/a&gt; for our CI management.&lt;/p&gt;
&lt;h2&gt;Virtual Machine&lt;/h2&gt;
&lt;p&gt;The biggest change in this release has definitely been the switch of the main implementation to a Virtual Machine. The
JavaScript code first gets parsed into AST, then compiled into op-codes, and finally executed in the VM. This adds some
extra steps, which, for now, have reduced the performance of the engine. We hope to fix some of these degradations over the course of the next few releases so hang tight. The new VM opens the door for many great features in the future (we&#39;re looking at you, async/await), and allows some nicer optimizations in the parsing and compilation phases in which we have already started working (such as &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1829&quot;&gt;#1829&lt;/a&gt; and
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/1849&quot;&gt;#1849&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This move towards a VM has also brought one great new feature, generator execution (&lt;a href=&quot;https://github.com/boa-dev/boa/pull/1790&quot;&gt;#1790&lt;/a&gt;).
You can find out more about how to use the VM &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/docs/vm.md&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;img class=&quot;light&quot; src=&quot;https://boa-dev.github.io/images/2022-03-15/boa_architecture_light.svg&quot; /&gt;
&lt;img class=&quot;dark&quot; src=&quot;https://boa-dev.github.io/images/2022-03-15/boa_architecture_dark.svg&quot; /&gt;
&lt;br /&gt;
&lt;h2&gt;Boa opens financial contributions&lt;/h2&gt;
&lt;p&gt;In the past months, due to the big and steady progress on Boa, we have received multiple requests to contribute to Boa
financially. From now on, anyone can contribute with either a recurring donation, or a one-time contribution in our
&lt;a href=&quot;https://opencollective.com/boa&quot;&gt;OpenCollective page&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;What does this mean for Boa?&lt;/h3&gt;
&lt;p&gt;Being able to receive financial contributions won&#39;t directly show a change in Boa development, but depending on how much
funding we get, we are already planning next steps. Having more motivated contributors would be the first step. We all
want to spend more of our free time in boa, and receiving a financial compensation for it is definitely making the team
members eager to continue contributing.&lt;/p&gt;
&lt;p&gt;But that is not our only idea. We would like to create a reproducible benchmarking platform. Currently, we just use GitHub
actions for benchmarking, which is useful to get some general ideas on how some changes affect the performance of the
engine. However, they have a high variability (up to 10%), meaning that we can definitely see changes if they are big, but it&#39;s
impossible to see differences if changes are minimal (1-2%, for example). Having the infrastructure to do proper performance
testing would require using dedicated CPUs, for example, which could be financed using the Boa Open Collective.&lt;/p&gt;
&lt;p&gt;On the development side, there are some very big projects that require deep involvement from the team. Priorities include (not neccesarily in order):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/boa-dev/boa/projects/3&quot;&gt;Async/Await support&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Better &lt;a href=&quot;https://github.com/boa-dev/boa/projects/5&quot;&gt;completion records&lt;/a&gt; implementation&lt;/li&gt;
&lt;li&gt;Performance improvement across the board.&lt;/li&gt;
&lt;li&gt;Future implementation of Shapes/Hidden Classes.&lt;/li&gt;
&lt;li&gt;Being able to measure against other engines.&lt;/li&gt;
&lt;li&gt;Improved conformance of the EcmaScript specification.&lt;/li&gt;
&lt;li&gt;Integration with &lt;a href=&quot;https://github.com/unicode-org/icu4x&quot;&gt;ICU4X&lt;/a&gt; for Intl and future Temporal implementation.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Implementing a &lt;a href=&quot;https://github.com/boa-dev/boa/discussions/1531&quot;&gt;proper API&lt;/a&gt; for Rust crates that want to embed Boa as they
like, or a &lt;a href=&quot;https://github.com/boa-dev/boa/issues/332&quot;&gt;C API&lt;/a&gt; so that other software, not written in Rust, can use Boa,
are also a priority, and implementing all the new built-in objects to achieve 100% conformance with the ECMAScript
specification is also a must. All this takes time, and we will need to finance developers working on these big issues.&lt;/p&gt;
&lt;h3&gt;Can I contribute differently?&lt;/h3&gt;
&lt;p&gt;If financial contribution is not your strength, you can contribute by asking to be assigned to one of our
&lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+no%3Aassignee&quot;&gt;open issues&lt;/a&gt;, and asking for mentoring if you
don&#39;t know your way around the engine. Our &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CONTRIBUTING.md&quot;&gt;contribution guide&lt;/a&gt;
should help you here. If you are more used to working with JavaScript or frontend web development, we also
welcome help to improve our web presence, either in &lt;a href=&quot;https://github.com/boa-dev/boa-dev.github.io&quot;&gt;our website&lt;/a&gt;, or in
our &lt;a href=&quot;https://github.com/boa-dev/boa/issues/820&quot;&gt;testing representation&lt;/a&gt; page or benchmarks page. You can also contribute to
our Criterion benchmark comparison GitHub &lt;a href=&quot;https://github.com/boa-dev/criterion-compare-action&quot;&gt;action&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We are also looking to improve the documentation of the engine, both for developers of the engine itself and for users of the
engine. Feel free to contact us in &lt;a href=&quot;https://discord.gg/tUFFk9Y&quot;&gt;Discord&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Thank You&lt;/h3&gt;
&lt;p&gt;Last but certainly not least, a big &lt;strong&gt;Thank You&lt;/strong&gt; to all the contributors of Boa.
It&#39;s not often we list them but we would like to say thank you to the new contributors who joined for the last release.&lt;/p&gt;
&lt;h4&gt;Thank you New Contributors&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/abhishekc-sharma&quot;&gt;@abhishekc-sharma&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1612&quot;&gt;#1612&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/kevinputera&quot;&gt;@kevinputera&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1606&quot;&gt;#1606&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/nrabulinski&quot;&gt;@nrabulinski&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1614&quot;&gt;#1614&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hle0&quot;&gt;@hle0&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1618&quot;&gt;#1618&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/nekevss&quot;&gt;@nekevss&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1613&quot;&gt;#1613&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lowr&quot;&gt;@lowr&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1628&quot;&gt;#1628&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Nimpruda&quot;&gt;@Nimpruda&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1634&quot;&gt;#1634&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/atouchet&quot;&gt;@atouchet&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1638&quot;&gt;#1638&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/praveenbakkal&quot;&gt;@praveenbakkal&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1680&quot;&gt;#1680&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/bsinky&quot;&gt;@bsinky&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1665&quot;&gt;#1665&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/TheDoctor314&quot;&gt;@TheDoctor314&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1691&quot;&gt;#1691&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.15</title>
    <link href="https://boa-dev.github.io/posts/2022-06-10-boa-release-15/"/>
    <updated>2022-06-10T00:00:00Z</updated>
    <id>https://boa-dev.github.io/posts/2022-06-10-boa-release-15/</id>
    <content type="html">&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Boa v0.15 is now available! After around 3 months of development, we are very happy to present you the newest release of the
Boa JavaScript engine. Boa makes it easy to embed a JS engine in your projects, and you can even use it from WebAssembly. See
the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;about&lt;/a&gt; page for more info.&lt;/p&gt;
&lt;p&gt;Boa currently supports part of the JavaScript language. In this release, our conformance has grown from 49.74% to 62.29%
in the official ECMAScript Test Suite (Test262). The engine now passes 56,372 tests, coming from 43,986 in Boa 0.14
(28.1% increase), and we have closed 18 issues and merged 58 pull requests. You can check the full list of changes
&lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.15/CHANGELOG.md&quot;&gt;here&lt;/a&gt;, and the full information on conformance
&lt;a href=&quot;https://boa-dev.github.io/boa/test262/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;New ECMAScript features&lt;/h2&gt;
&lt;p&gt;While there are only a few big new features in this release, there are a lot of fixes for existing features that should enable
many more JavaScript programs to execute correctly. For a detailed list checkout the
&lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.15/CHANGELOG.md&quot;&gt;changelog&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Support for Classes&lt;/h3&gt;
&lt;p&gt;With this new release boa ships with support for ECMAScript Classes. While not all features are implemented, most basic
functionality should work as expected.&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Rectangle&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;height&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; width&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;calcArea&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;area&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calcArea&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Rectangle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calcArea&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 8&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Support for &lt;code&gt;eval()&lt;/code&gt; and &lt;code&gt;Function()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;While &lt;code&gt;eval()&lt;/code&gt; is one of the less popular Javascript features, many tests in the ECMAScript Test Suite use it. For a
better representation of passing tests and to fully comply with the specification we have implemented it and the similar
&lt;code&gt;Function()&lt;/code&gt; constructor. We would like to echo the mdn docs and point out to
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!&quot;&gt;Never use eval()!&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;console.log(&quot;Never use eval()!&quot;)&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; f &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;arg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;console.log(&quot;This is also a very &quot; + arg + &quot; idea!&quot;)&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;bad&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/raskad&quot;&gt;@raskad&lt;/a&gt; for working on classes, &lt;code&gt;eval()&lt;/code&gt; and &lt;code&gt;Function()&lt;/code&gt;, among many other things!&lt;/p&gt;
&lt;h2&gt;Regaining Performance&lt;/h2&gt;
&lt;p&gt;After moving from an AST based execution to our Virtual Machine we observed performance losses in some of our benchmarks. We
found out that the root-cause of these losses was a single &lt;code&gt;format!()&lt;/code&gt; call in the hot-path of the VM. Our assumption was that
the formatting logic would be optimized out by rustc or llvm, because it was used as an argument to an empty (feature-gated)
function. After replacing the &lt;code&gt;format!()&lt;/code&gt; call with a &lt;code&gt;&amp;amp;&#39;static str&lt;/code&gt; the expected optimization took place and we were back to
previous performance levels. For more details check out &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1973&quot;&gt;#1973&lt;/a&gt; for the changes and
some discussion about this issue. Thanks to &lt;a href=&quot;https://github.com/pdogr&quot;&gt;@pdogr&lt;/a&gt; for finding the issue and contributing a fix.&lt;/p&gt;
&lt;h2&gt;Starting work on Internationalization&lt;/h2&gt;
&lt;p&gt;ECMAScript specifies an Internationalization API through the &lt;code&gt;Intl&lt;/code&gt; global object. We have started implementing many internal
functions and structures to provide the &lt;code&gt;Intl&lt;/code&gt; object in boa. To take advantage of existing work in this space we have started
integrating the &lt;a href=&quot;https://github.com/unicode-org/icu4x&quot;&gt;ICU4X library&lt;/a&gt; into boa. Thanks to
&lt;a href=&quot;https://github.com/NorbertGarfield&quot;&gt;@NorbertGarfield&lt;/a&gt; and &lt;a href=&quot;https://github.com/jedel1043&quot;&gt;@jedel1043&lt;/a&gt; for their continued work
on this topic.&lt;/p&gt;
&lt;h2&gt;Rust Wrappers for Javascript Objects&lt;/h2&gt;
&lt;p&gt;We have started the implementation of wrappers around built-in Javascript objects like &lt;code&gt;Array&lt;/code&gt;. These Rust types make it easy
to work with Javascript objects in Rust and provide a type safe abstraction around them. Many of these wrappers are not
implemented yet and may be a good place to start contributing to boa. If you are interested, check out the
&lt;a href=&quot;https://github.com/boa-dev/boa/issues/2098&quot;&gt;tracking issue&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;How can you contribute to Boa?&lt;/h2&gt;
&lt;p&gt;In March, boa opened financial contributions on its &lt;a href=&quot;https://opencollective.com/boa&quot;&gt;OpenCollective page&lt;/a&gt;. Since then, we have
to thank Demergent Labs, a company using Boa in the Internet Computer that has decided to sponsor us, and Clemens
Koza, who is our first backer! We are already thinking on how we will use these contributions to improve how we develop Boa.&lt;/p&gt;
&lt;p&gt;If financial contribution is not your strength, you can contribute by asking to be assigned to one of our
&lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+no%3Aassignee&quot;&gt;open issues&lt;/a&gt;, and asking for mentoring if you
don&#39;t know your way around the engine. Our &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CONTRIBUTING.md&quot;&gt;contribution guide&lt;/a&gt;
should help you here. If you are more used to working with JavaScript or frontend web development, we also
welcome help to improve our web presence, either in &lt;a href=&quot;https://github.com/boa-dev/boa-dev.github.io&quot;&gt;our website&lt;/a&gt;, or in
our &lt;a href=&quot;https://github.com/boa-dev/boa/issues/820&quot;&gt;testing representation&lt;/a&gt; page or benchmarks page. You can also contribute to
our Criterion benchmark comparison GitHub &lt;a href=&quot;https://github.com/boa-dev/criterion-compare-action&quot;&gt;action&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We are also looking to improve the documentation of the engine, both for developers of the engine itself and for users of the
engine. Feel free to contact us in &lt;a href=&quot;https://discord.gg/tUFFk9Y&quot;&gt;Discord&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Thank You&lt;/h3&gt;
&lt;p&gt;Last but certainly not least, a big &lt;strong&gt;Thank You&lt;/strong&gt; to
&lt;a href=&quot;https://github.com/boa-dev/boa/graphs/contributors?from=2022-03-16&amp;amp;to=2022-06-10&amp;amp;type=c&quot;&gt;all the contributors&lt;/a&gt; of this Boa
release. We would like to particularly thank our new contributors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lupd&quot;&gt;@lupd&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1979&quot;&gt;#1979&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/NorbertGarfield&quot;&gt;@NorbertGarfield&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1963&quot;&gt;#1963&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/pdogr&quot;&gt;@pdogr&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1968&quot;&gt;#1968&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/kilotaras&quot;&gt;@kilotaras&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1959&quot;&gt;#1959&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/tsutton&quot;&gt;@tsutton&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1999&quot;&gt;#1999&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/manthanabc&quot;&gt;@manthanabc&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1957&quot;&gt;#1957&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lastmjs&quot;&gt;@lastmjs&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/1990&quot;&gt;#1990&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/YXL76&quot;&gt;@YXL76&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2042&quot;&gt;#2042&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  
  <entry>
    <title>Boa release v0.16</title>
    <link href="https://boa-dev.github.io/posts/2022-09-25-boa-release-16/"/>
    <updated>2022-09-25T00:00:00Z</updated>
    <id>https://boa-dev.github.io/posts/2022-09-25-boa-release-16/</id>
    <content type="html">&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Boa v0.16 is now available! After around 3 months of development, we are very happy to present you the newest release of
the Boa JavaScript engine. Boa makes it easy to embed a JS engine in your projects, and you can even use it from
WebAssembly. See the &lt;a href=&quot;https://boa-dev.github.io/about&quot;&gt;about&lt;/a&gt; page for more info.&lt;/p&gt;
&lt;p&gt;Boa currently supports part of the JavaScript language. In this release, our conformance has grown from 62.29% to 74.53%
in the official ECMAScript Test Suite (Test262). The engine now passes 68,612 tests, coming from 56,372 in Boa 0.15
(21.7% increase), and we have closed 9 issues and merged 59 pull requests. You can check the full list of changes
&lt;a href=&quot;https://github.com/boa-dev/boa/blob/v0.16/CHANGELOG.md&quot;&gt;here&lt;/a&gt;, and the full information on conformance
&lt;a href=&quot;https://boa-dev.github.io/boa/test262/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;New ECMAScript features&lt;/h2&gt;
&lt;h3&gt;Support for Promises&lt;/h3&gt;
&lt;p&gt;With this new release Boa ships support for ECMAScript Promises. All tests in the 262 test suite &lt;code&gt;built-ins/Promise&lt;/code&gt; pass.
Promises enable asynchronous operations to be executed via an internal job queue. Starting with our work on Promises,
we have stopped ignoring the 262 tests that are flagged as &lt;code&gt;async&lt;/code&gt;. We also have enabled our 262 test runner to work
with asynchronous tests. We would like to thank &lt;a href=&quot;https://github.com/aaronmunsters&quot;&gt;@aaronmunsters&lt;/a&gt; for proposing
the initial PR for Promises (&lt;a href=&quot;https://github.com/boa-dev/boa/pull/1923&quot;&gt;#1923&lt;/a&gt;) that we then could expand on.&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// This program will print:&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//    1. End of synchronous execution.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//    2. The Promise has been resolved.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; promise &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;2. The Promise has been resolved.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1. End of synchronous execution.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Support for Async/Await&lt;/h3&gt;
&lt;p&gt;The implementation of Promises has enabled us to implement async functions and the await keyword. The async/await syntax
makes it easier to use Promises within javascript. We have implemented async functions, async generators,
&lt;code&gt;for await...of&lt;/code&gt; loops and the &lt;code&gt;await&lt;/code&gt; keyword. While not all tests pass for these features yet, the basic functionality
should work.&lt;/p&gt;
&lt;h2&gt;Dense/Packed JavaScript Arrays&lt;/h2&gt;
&lt;p&gt;JavaScript Arrays are regular objects whose values are stored as indexed properties. Because arrays have no fixed
length, values can be assigned to any possible index without any of the previous indices being used. Due to this
behavior indexed properties are stored in a map instead of in a vector, as the vector would allocate a lot of unused
memory if a high index is used. We have implemented an optimization to make it possible to use optimized vector storage
for array values, as long as indices are not assigned out of order. This has improved the performance of arrays around
&lt;strong&gt;45%&lt;/strong&gt; for arrays without empty slots. To learn more about this optimization take a look at the PR
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/2167&quot;&gt;#2167&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Support for URI encoding and decoding functions&lt;/h2&gt;
&lt;p&gt;This version for Boa ships with support for the built-in URI encoding and decoding functions &lt;code&gt;encodeURI&lt;/code&gt;, &lt;code&gt;decodeURI&lt;/code&gt;,
&lt;code&gt;encodeURIComponent&lt;/code&gt; and &lt;code&gt;decodeURIComponent&lt;/code&gt;. With the exception of UTF-16 related test, all test in the relevant 262
test suites pass for these functions.&lt;/p&gt;
&lt;h2&gt;How can you contribute to Boa?&lt;/h2&gt;
&lt;p&gt;In March, Boa opened financial contributions on its &lt;a href=&quot;https://opencollective.com/boa&quot;&gt;OpenCollective page&lt;/a&gt;.
If financial contribution is not your strength, you can contribute by asking to be assigned to one of our
&lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+no%3Aassignee&quot;&gt;open issues&lt;/a&gt;, and asking for mentoring if you
don&#39;t know your way around the engine. Our &lt;a href=&quot;https://github.com/boa-dev/boa/blob/main/CONTRIBUTING.md&quot;&gt;contribution guide&lt;/a&gt;
should help you here. If you are more used to working with JavaScript or frontend web development, we also
welcome help to improve our web presence, either in &lt;a href=&quot;https://github.com/boa-dev/boa-dev.github.io&quot;&gt;our website&lt;/a&gt;, or in
our &lt;a href=&quot;https://github.com/boa-dev/boa/issues/820&quot;&gt;testing representation&lt;/a&gt; page or benchmarks page. You can also contribute to
our Criterion benchmark comparison GitHub &lt;a href=&quot;https://github.com/boa-dev/criterion-compare-action&quot;&gt;action&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We are also looking to improve the documentation of the engine, both for developers of the engine itself and for users of the
engine. Feel free to contact us in &lt;a href=&quot;https://discord.gg/tUFFk9Y&quot;&gt;Discord&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Thank You&lt;/h3&gt;
&lt;p&gt;Last but certainly not least, a big &lt;strong&gt;Thank You&lt;/strong&gt; to
&lt;a href=&quot;https://github.com/boa-dev/boa/graphs/contributors?from=2022-06-11&amp;amp;to=2022-09-25&amp;amp;type=c&quot;&gt;all the contributors&lt;/a&gt;
of this Boa release. We would like to particularly thank our new contributors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/CYBAI&quot;&gt;@CYBAI&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2108&quot;&gt;#2108&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/udhaykumarbala&quot;&gt;@udhaykumarbala&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2245&quot;&gt;#2245&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/tunz&quot;&gt;@tunz&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2261&quot;&gt;#2261&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/anuvratsingh&quot;&gt;@anuvratsingh&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2162&quot;&gt;#2162&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/creampnx-x&quot;&gt;@creampnx-x&lt;/a&gt; who made their first contribution in &lt;a href=&quot;https://github.com/boa-dev/boa/pull/2274&quot;&gt;#2274&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  
  <entry>
    <title>Adding a JavaScript interpreter to your Rust project</title>
    <link href="https://boa-dev.github.io/posts/2022-10-24-boa-usage/"/>
    <updated>2022-10-24T00:00:00Z</updated>
    <id>https://boa-dev.github.io/posts/2022-10-24-boa-usage/</id>
    <content type="html">&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;When we develop tools for our users, we sometimes want to give them some form of control over how
they work. This is common in games, where we can add scripting for our users to be able to create
extensions, or even for business tools, where we allow our customer to change or extend the
behaviour of our platform. For those cases, using Rust, a compiled, type safe language can be a
challenge, since once a program has been compiled, it&#39;s tricky to change or extend it at runtime.
Furthermore, many of our users will prefer to use a more common scripting language, such as
JavaScript.&lt;/p&gt;
&lt;p&gt;This is where Boa enters the scene. Boa is a Javascript engine fully written in Rust. Currently, it
can be used in places where you need most of the JavaScript language to work, even though, we would
advise to wait to get all our &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=64+162+718+773+2068+1930+1922+1917+1900+1848+1805+1570+1402+1307+1180+is%3Aopen&quot;&gt;known blocker bugs&lt;/a&gt; solved before using this for critical
workloads. You can check how conformant we are with the official ECMAScript specification
&lt;a href=&quot;https://boa-dev.github.io/boa/test262/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And, before going further, we would like to mention that you can contribute to Boa by solving one
of the &lt;a href=&quot;https://github.com/boa-dev/boa/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22%2CHacktoberfest%2CE-Easy%2C%22good+first+issue%22+no%3Aassignee&quot;&gt;issues&lt;/a&gt; where we need special help, and we now also accept financial contributions
in &lt;a href=&quot;https://opencollective.com/boa&quot;&gt;our OpenCollective&lt;/a&gt; page.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: You can see more examples of integrating Boa in &lt;a href=&quot;https://github.com/boa-dev/boa/tree/main/boa_examples&quot;&gt;our repository&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Starting from scratch&lt;/h2&gt;
&lt;p&gt;Let&#39;s start a new project running &lt;code&gt;cargo new my_project&lt;/code&gt;, and then add &lt;a href=&quot;https://crates.io/crates/boa_engine&quot;&gt;&lt;code&gt;boa_engine&lt;/code&gt;&lt;/a&gt; as one
of our dependencies by running &lt;code&gt;cargo add boa_engine -F console&lt;/code&gt; in our newly created &lt;code&gt;my_project&lt;/code&gt;
directory.&lt;/p&gt;
&lt;p&gt;Let&#39;s start by adding the minimal code needed to get a JavaScript interpreter working in our
&lt;code&gt;src/main.rs&lt;/code&gt; file:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; js_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;console.log(&#39;Hello World from a JS code string!&#39;)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Instantiate the execution context&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Parse the source code&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;js_code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// Pretty print the error&lt;/span&gt;
            &lt;span class=&quot;token macro property&quot;&gt;eprintln!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Uncaught {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see in this example, when working with Boa, you will have to use a &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html&quot;&gt;&lt;code&gt;Context&lt;/code&gt;&lt;/a&gt;,
which will be in charge of initializing all the internals and built-in objects (such as &lt;code&gt;Date&lt;/code&gt;,
&lt;code&gt;Promise&lt;/code&gt; and so on). The &lt;code&gt;Context&lt;/code&gt; in Boa is also your go-to place for configuring your interpreter
as you wish. You can add custom global functions, objects, and anything you might imagine. It&#39;s also
one of the arguments you will receive if you create a Rust function and expose it to JavaScript, and
with it, you will be able to throw errors, modify the global object and return values to JavaScript.&lt;/p&gt;
&lt;p&gt;Talking about values, Boa comes with its built-in &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/enum.JsValue.html&quot;&gt;&lt;code&gt;JsValue&lt;/code&gt;&lt;/a&gt; type. This enumeration
represents any JavaScript value that can, for example, be assigned to a variable. And, before you
ask, you can convert it to and from a &lt;a href=&quot;https://docs.rs/serde_json/latest/serde_json/value/enum.Value.html&quot;&gt;&lt;code&gt;serde_json::Value&lt;/code&gt;&lt;/a&gt;, of course, by using the
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/enum.JsValue.html#method.from_json&quot;&gt;&lt;code&gt;JsValue::from_json()&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/enum.JsValue.html#method.to_json&quot;&gt;&lt;code&gt;JsValue::to_json()&lt;/code&gt;&lt;/a&gt; methods.&lt;/p&gt;
&lt;p&gt;As you can see in those methods, or in the &lt;code&gt;Context::eval()&lt;/code&gt; that we used earlier, you will
receive a &lt;code&gt;JsResult&lt;/code&gt; as a response. This result type will contain a &lt;code&gt;JsValue&lt;/code&gt; as its error variant,
which means you can return the error back to JavaScript for it to handle it. A &lt;code&gt;JsValue&lt;/code&gt;, internally,
is a garbage-collected JavaScript value. But, isn&#39;t Rust one of the few non-garbage collected
languages? Wasn&#39;t that a good thing?&lt;/p&gt;
&lt;p&gt;The answer is &lt;em&gt;yes, of course&lt;/em&gt;, but JavaScript requires a garbage collector. This garbage collector
makes sure that all values are freed when they are no longer needed. It also makes a &lt;code&gt;JsValue&lt;/code&gt;
extremely cheap to clone, independently of its contents.&lt;/p&gt;
&lt;p&gt;If you run this example code with &lt;code&gt;cargo run&lt;/code&gt;, you will notice that it will print the message sent
to &lt;code&gt;console.log()&lt;/code&gt;, and it will also print &lt;code&gt;undefined&lt;/code&gt; at the end. This last &lt;code&gt;undefined&lt;/code&gt; is part of
the &lt;code&gt;Ok(res)&lt;/code&gt; branch in the &lt;code&gt;match&lt;/code&gt;, which prints the result of the execution. In this case, the
result of the execution is the result of the last statement, which is the &lt;code&gt;console.log()&lt;/code&gt;, and this
statement returns &lt;code&gt;undefined&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;But, what can you do with Boa?&lt;/h2&gt;
&lt;p&gt;Let&#39;s start with the basics. Of course, you can execute JavaScript code. This code can be any
string or directly a byte vector (so you can load files and use them directly). You can use
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.eval&quot;&gt;&lt;code&gt;Context::eval()&lt;/code&gt;&lt;/a&gt; in both cases, as you saw before, and you can also use
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.parse&quot;&gt;&lt;code&gt;Context::parse()&lt;/code&gt;&lt;/a&gt;, which will give you a &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/syntax/ast/node/statement_list/struct.StatementList.html&quot;&gt;&lt;code&gt;StatementList&lt;/code&gt;&lt;/a&gt; that
you can use multiple times in &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.compile&quot;&gt;&lt;code&gt;Context::compile()&lt;/code&gt;&lt;/a&gt;, so that you don&#39;t need to
parse the same code more than once. The compiled source code can also be executed multiple times,
since it&#39;s &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/vm/struct.CodeBlock.html&quot;&gt;&lt;code&gt;CodeBlock&lt;/code&gt;&lt;/a&gt; is garbage collected, and therefore it can be cheaply cloned.
In order to execute a code block you will need to use &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.execute&quot;&gt;&lt;code&gt;Context::execute()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This in itself is good enough to provide a simple scripting API for your project, but where Boa
really shines is in the ability to inter-operate Rust and JavaScript. Let&#39;s start with a simple
example: exposing a Rust function to JavaScript. A JavaScript-compatible Rust function must have
the &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/builtins/function/type.NativeFunctionSignature.html&quot;&gt;&lt;code&gt;NativeFunctionSignature&lt;/code&gt;&lt;/a&gt; signature:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;builtins&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsArgs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/// Says &quot;hello&quot; using the first argument.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;say_hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_this&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_or_undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;is_undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello {}!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/builtins/trait.JsArgs.html&quot;&gt;&lt;code&gt;JsArgs&lt;/code&gt;&lt;/a&gt; trait allows you to retrieve a value if the function received it, or set it
to the &lt;code&gt;undefined&lt;/code&gt; value, if not. Then, in this case, it will convert the name to a &lt;code&gt;JsString&lt;/code&gt;
before printing it, since we might be receiving an object, a symbol, a boolean... one of the perks
of dynamic typing. This will then print the result in th standard output using the common
&lt;code&gt;println!()&lt;/code&gt; macro in Rust. It will just return an undefined value.&lt;/p&gt;
&lt;p&gt;You can register this function in the context by adding this line after the context creation (and
before executing any JS) in the &lt;code&gt;main()&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_builtin_function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;say_hello&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; say_hello&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This will register it as a global function, with the &lt;code&gt;say_hello()&lt;/code&gt; name, and with a &lt;code&gt;length&lt;/code&gt; of 1
(which indicates the number of arguments that it receives by default). You can then try it out by
modifying the JavaScript string:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; js_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;r#&quot;say_hello(&quot;Rust&quot;);&quot;#&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;r#&amp;quot;...&amp;quot;#&lt;/code&gt; syntax is a Rust raw &lt;a href=&quot;https://doc.rust-lang.org/rust-by-example/std/str.html#literals-and-escapes&quot;&gt;string literal&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can also add any &lt;code&gt;JsValue&lt;/code&gt; as a property to the global object by using the
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.register_global_property&quot;&gt;&lt;code&gt;Context::register_global_property()&lt;/code&gt;&lt;/a&gt; function:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;property&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_property&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MY_PROJECT_VERSION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And you can use it in JavaScript:&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;say_hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MY_PROJECT_VERSION&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/property/struct.Attribute.html&quot;&gt;&lt;code&gt;Attribute&lt;/code&gt;&lt;/a&gt; of a property indicates if it will be writable (it can be set and
modified), enumerable (it can be used in &lt;code&gt;for..in&lt;/code&gt; statements) and configurable (its attributes or
type of property can be modified).&lt;/p&gt;
&lt;h2&gt;Integrating a full Rust data structure&lt;/h2&gt;
&lt;p&gt;Sometimes, adding a function or a single &lt;code&gt;JsValue&lt;/code&gt; to the global scope of your JavaScript context
is not enough, and you want to enable the full power of Rust with its structures to handle more
complex scenarios. This can be achieved using the &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/class/trait.Class.html&quot;&gt;&lt;code&gt;Class&lt;/code&gt;&lt;/a&gt; trait. This has to be combined
with two other traits, that make any Rust object be garbage-collected: &lt;a href=&quot;https://docs.rs/boa_gc/latest/boa_gc/trait.Trace.html&quot;&gt;&lt;code&gt;Trace&lt;/code&gt;&lt;/a&gt; and
&lt;a href=&quot;https://docs.rs/boa_gc/0.16.0/boa_gc/trait.Finalize.html&quot;&gt;&lt;code&gt;Finalize&lt;/code&gt;&lt;/a&gt;, in the &lt;a href=&quot;https://crates.io/crates/boa_gc&quot;&gt;&lt;code&gt;boa_gc&lt;/code&gt;&lt;/a&gt; crate. Luckily those two traits can be derived.&lt;/p&gt;
&lt;p&gt;Let&#39;s start by implementing a &lt;code&gt;Person&lt;/code&gt; type, that will showcase the potential of this API. Let&#39;s
run &lt;code&gt;cargo add gc boa_gc&lt;/code&gt; and add some code:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_gc&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Finalize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Trace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token attribute attr-name&quot;&gt;#[derive(Debug, Trace, Finalize)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/// The name of the person.&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/// The age of the person.&lt;/span&gt;
    age&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, we will move the &lt;code&gt;say_hello()&lt;/code&gt; function to be a static method of &lt;code&gt;Person&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;impl&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/// Says &quot;hello&quot; using the name and the age of a `Person`.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;say_hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;this&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _args&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; this &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; this
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;and_then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;obj&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;downcast_ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok_or_else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;construct_type_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;`this` is not a `Person` object&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello {}-year-old {}!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, this now uses the &lt;code&gt;this&lt;/code&gt; parameter of the &lt;code&gt;say_hello()&lt;/code&gt; function, which should be a
&lt;code&gt;Person&lt;/code&gt;, but in JavaScript you can assign methods of some objects to others, so we must make sure
that on this invocation, we are indeed working with a &lt;code&gt;Person&lt;/code&gt;, and return a &lt;code&gt;TypeError&lt;/code&gt; if not.&lt;/p&gt;
&lt;p&gt;Now, let&#39;s implement the &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/class/trait.Class.html&quot;&gt;&lt;code&gt;Class&lt;/code&gt;&lt;/a&gt; trait. This trait requires a &lt;code&gt;NAME&lt;/code&gt; constant, which will
be the name of the global object property, and a &lt;code&gt;LENGTH&lt;/code&gt; for the constructor (the number of
arguments, by default &lt;code&gt;0&lt;/code&gt;). Then, it needs a &lt;code&gt;constructor()&lt;/code&gt; function, which is a native function
that will be called when we do a &lt;code&gt;new Person()&lt;/code&gt;, and an &lt;code&gt;init()&lt;/code&gt; function, which will be called by
the &lt;code&gt;Context&lt;/code&gt; when registering the function in the global scope. It will receive a
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/class/struct.ClassBuilder.html&quot;&gt;&lt;code&gt;ClassBuilder&lt;/code&gt;&lt;/a&gt;, which allows you to add a method (both, static and &lt;code&gt;prototype&lt;/code&gt;), a
&lt;code&gt;property&lt;/code&gt;, also for both cases, accessor properties (to use &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;set&lt;/code&gt;) and property
descriptors. You can also get a reference to the &lt;code&gt;Context&lt;/code&gt; with the &lt;code&gt;ClasBuilder::context()&lt;/code&gt; method,
in case you want to do anything fancier.&lt;/p&gt;
&lt;p&gt;In this case, the constructor will take care of constructing the Rust &lt;code&gt;Person&lt;/code&gt; data structure with
the two arguments it receives, and then register the &lt;code&gt;say_hello()&lt;/code&gt; method:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token namespace&quot;&gt;builtins&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsArgs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token namespace&quot;&gt;class&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;impl&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NAME&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;&#39;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Person&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LENGTH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// This is what is called when we construct a `Person` with the expression `new Person()`.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_this&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_or_undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_or_undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;throw_range_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;format!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;invalid age `{age}`. Must be between 0 and 150&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;try_from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;we already checked that it was in range&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            age&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/// Here is where the class is initialized, to be inserted into the global object.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;class&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        class&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;say_hello&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;say_hello&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In order to register the class, you will need to use the
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/struct.Context.html#method.register_global_class&quot;&gt;&lt;code&gt;Context::register_global_class()&lt;/code&gt;&lt;/a&gt; method:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;context
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;could not register class&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can now adapt the JavaScript code:&lt;/p&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;say_hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you want to access the global object from Rust, you can use &lt;code&gt;Context::global_object()&lt;/code&gt;, which
will return a &lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/object/struct.JsObject.html&quot;&gt;&lt;code&gt;JsObject&lt;/code&gt;&lt;/a&gt;. In this object, you can use the
&lt;a href=&quot;https://docs.rs/boa_engine/latest/boa_engine/object/struct.JsObject.html#method.get&quot;&gt;&lt;code&gt;JsObject::get()&lt;/code&gt;&lt;/a&gt; function to retrieve any property of the global object, such as
the &lt;code&gt;MY_PROJECT_VERSION&lt;/code&gt; that you defined earlier, or any intrinsic, such as the &lt;code&gt;Date&lt;/code&gt; object.&lt;/p&gt;
&lt;p&gt;We are now in the process of creating Rust wrappers for all JavaScript intrinsics (&lt;a href=&quot;https://github.com/boa-dev/boa/issues/2098&quot;&gt;#2098&lt;/a&gt;).
For example, you can create a &lt;code&gt;JsArray&lt;/code&gt; from a &lt;code&gt;JsObject&lt;/code&gt; to make it much easier to manipulate a
JavaScript array from Rust. In the following example, you&#39;ll create a new &lt;code&gt;reverseAppend()&lt;/code&gt; global
function that will receive an array, reverse it, and then append the &lt;em&gt;&amp;quot;My Project&amp;quot;&lt;/em&gt; string to it.
It will then get the &lt;code&gt;MY_PROJECT_VERSION&lt;/code&gt; from the global object, and append it to the array.&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token namespace&quot;&gt;builtins&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsArgs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;object&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;property&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/// Reverses an array and appends the `&quot;My Project&quot;` string and the `MY_PROJECT_VERSION` global&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;/// property to it.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;reverse_append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_this&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; arr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_or_undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok_or_else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;construct_type_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;argument must be an array&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; arr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reverse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reverse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    reverse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;My Project&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; global_object &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;global_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; version &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; global_object
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MY_PROJECT_VERSION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap_or_default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    reverse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;version&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;reverse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;into&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; js_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;r#&quot;
        let arr = [&#39;a&#39;, 2, 5.4, &quot;Hello&quot;];
        reverseAppend(arr);
    &quot;#&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Instantiate the execution context&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_property&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MY_PROJECT_VERSION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register_global_builtin_function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;reverseAppend&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reverse_append&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Parse the source code&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;js_code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// Pretty print the error&lt;/span&gt;
            &lt;span class=&quot;token macro property&quot;&gt;eprintln!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Uncaught {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We are looking for contributors to implement the rest of the wrappers, and of course, we offer mentoring!&lt;/p&gt;
&lt;h2&gt;What&#39;s coming next?&lt;/h2&gt;
&lt;p&gt;Boa&#39;s development is ongoing non-stop. The next version, v0.17, is already looking pretty nice,
with some great enhancements. For example, &lt;a href=&quot;https://github.com/jedel1043&quot;&gt;@jedel1043&lt;/a&gt; has created new
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/2283&quot;&gt;&amp;quot;lazy&amp;quot; errors&lt;/a&gt;, that are much easier to create and throw, since they don&#39;t need a
&lt;code&gt;Context&lt;/code&gt;, and also enhance the performance. &lt;a href=&quot;https://github.com/nekevss&quot;&gt;@nekevss&lt;/a&gt; has implemented a
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/2326&quot;&gt;new wrapper&lt;/a&gt; for &lt;code&gt;RegExp&lt;/code&gt;, and &lt;a href=&quot;https://github.com/anuvratsingh&quot;&gt;@anuvratsingh&lt;/a&gt; is working on a &lt;code&gt;Date&lt;/code&gt;
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/2181&quot;&gt;wrapper&lt;/a&gt;. &lt;a href=&quot;https://github.com/Razican&quot;&gt;@razican&lt;/a&gt; is working on a JavaScript &amp;lt;-&amp;gt; Rust
&lt;a href=&quot;https://github.com/boa-dev/boa/pull/2276&quot;&gt;conversion trait&lt;/a&gt; and derive, that will allow you to convert a &lt;code&gt;JsValue&lt;/code&gt; to a Rust
structure and back really easily:&lt;/p&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_derive&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TryFromJs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;boa_engine&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;value&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TryFromJs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token attribute attr-name&quot;&gt;#[derive(Debug, TryFromJs)]&lt;/span&gt;
&lt;span class=&quot;token attribute attr-name&quot;&gt;#[allow(dead_code)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;TestStruct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    inner&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    hello&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token attribute attr-name&quot;&gt;#[boa(from_js_with = &lt;span class=&quot;token string&quot;&gt;&quot;lossy_conversion&quot;&lt;/span&gt;, hello = &lt;span class=&quot;token string&quot;&gt;&quot;myfriend&quot;&lt;/span&gt;)]&lt;/span&gt;
    my_float&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; js &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;r#&quot;
    let x = {
        inner: false,
        hello: &quot;World&quot;,
        my_float: 2.9,
    };

    x;
    &quot;#&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;js&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TestStruct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;try_from_js&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;e&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{str:?}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/// Converts the value lossly&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;lossy_conversion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JsResult&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;i16&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Rational&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;JsValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;i &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        _ &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;throw_type_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;cannot convert value to an i16&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We love contributions, whether it&#39;s a documentation enhancement, fixing or implementing the
ECMAScript specification, adding new functionality / APIs or enhancing performance, we would love
to get new contributors on board! We are also looking for financial contributors, so feel free to
join our &lt;a href=&quot;https://opencollective.com/boa&quot;&gt;OpenCollective&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
</feed>