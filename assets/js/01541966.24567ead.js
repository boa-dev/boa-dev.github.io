"use strict";(self.webpackChunkboajs_dev=self.webpackChunkboajs_dev||[]).push([[6183],{6670:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var o=t(4848),i=t(8453);const a={sidebar_position:5},c="Boa Debug Object",s={id:"debugging/debug_object",title:"Boa Debug Object",description:"Certain debugging actions in JavaScript land can be difficult to impossible to complete.",source:"@site/docs/debugging/debug_object.md",sourceDirName:"debugging",slug:"/debugging/debug_object",permalink:"/docs/debugging/debug_object",draft:!1,unlisted:!1,editUrl:"https://github.com/boa-dev/boa-dev.github.io/tree/main/docs/docs/debugging/debug_object.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"infoSidebar",previous:{title:"VM Execution Flowgraph",permalink:"/docs/debugging/debug_flowgraph"},next:{title:"Debuggers",permalink:"/docs/debugging/debug_other"}},r={},d=[{value:"<code>$boa.gc</code>",id:"boagc",level:2},{value:"Function <code>$boa.gc.collect()</code>",id:"function-boagccollect",level:3},{value:"Args (0): none",id:"args-0-none",level:4},{value:"<code>$boa.function</code>",id:"boafunction",level:2},{value:"Function <code>$boa.function.bytecode()</code>",id:"function-boafunctionbytecode",level:3},{value:"Args (1): target (function)",id:"args-1-target-function",level:4},{value:"Function <code>$boa.function.trace()</code>",id:"function-boafunctiontrace",level:3},{value:"Args (3): target (function), this (value), ...args (target&#39;s args values)",id:"args-3-target-function-this-value-args-targets-args-values",level:4},{value:"Function <code>$boa.function.traceable()</code>",id:"function-boafunctiontraceable",level:3},{value:"Args (2): target (function), should_trace (bool)",id:"args-2-target-function-should_trace-bool",level:4},{value:"Input",id:"input",level:4},{value:"Output",id:"output",level:4},{value:"Function <code>$boa.function.flowgraph()</code>",id:"function-boafunctionflowgraph",level:3},{value:"Args (2): target (function), options (object | string)",id:"args-2-target-function-options-object--string",level:4},{value:"<code>$boa.object</code>",id:"boaobject",level:2},{value:"Function <code>$boa.object.id()</code>",id:"function-boaobjectid",level:3},{value:"Args (1): target (object)",id:"args-1-target-object",level:4},{value:"<code>$boa.optimizer</code>",id:"boaoptimizer",level:2},{value:"Accessor <code>$boa.optimizer.constantFolding</code>",id:"accessor-boaoptimizerconstantfolding",level:3},{value:"Accessor <code>$boa.optimizer.statistics</code>",id:"accessor-boaoptimizerstatistics",level:3},{value:"<code>$boa.realm</code>",id:"boarealm",level:2},{value:"Function <code>$boa.realm.create</code>",id:"function-boarealmcreate",level:3},{value:"Args (0)",id:"args-0",level:4},{value:"<code>$boa.shape</code>",id:"boashape",level:2},{value:"Function <code>$boa.shape.id()</code>",id:"function-boashapeid",level:3},{value:"Args (1): id_target (object)",id:"args-1-id_target-object",level:4},{value:"Function <code>$boa.shape.type()</code>",id:"function-boashapetype",level:3},{value:"Args (1): type_target (object)",id:"args-1-type_target-object",level:4},{value:"Function <code>$boa.shape.same()</code>",id:"function-boashapesame",level:3},{value:"Args (2): one (object), two (object)",id:"args-2-one-object-two-object",level:4},{value:"<code>$boa.limits</code>",id:"boalimits",level:2},{value:"Accessor <code>$boa.limits.loop</code>",id:"accessor-boalimitsloop",level:3},{value:"Accessor <code>$boa.limits.recursion</code>",id:"accessor-boalimitsrecursion",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"boa-debug-object",children:"Boa Debug Object"}),"\n",(0,o.jsx)(n.p,{children:"Certain debugging actions in JavaScript land can be difficult to impossible to complete."}),"\n",(0,o.jsxs)(n.p,{children:["For these debugging purposes, ",(0,o.jsx)(n.code,{children:"boa_cli"})," comes with a ",(0,o.jsx)(n.code,{children:"$boa"})," object that contains useful utilities that can be used for inline debugging\nof ECMAScript source code evaluated by Boa via the CLI."]}),"\n",(0,o.jsxs)(n.p,{children:["To use the debug object, simply run any target source code with the ",(0,o.jsx)(n.code,{children:"--debug-object"})," CLI flag as shown below."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cargo run -- ./your_target_source_code.js --debug-object\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Providing ",(0,o.jsx)(n.code,{children:"--debug-object"})," tells ",(0,o.jsx)(n.code,{children:"boa_cli"})," to inject the ",(0,o.jsx)(n.code,{children:"$boa"})," debug object into the context as a global variable, making\nit accessible to Boa when the source code is executed."]}),"\n",(0,o.jsx)(n.p,{children:"The debug object currently has the below modules implemented:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boagc",children:(0,o.jsx)(n.code,{children:"gc"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boafunction",children:(0,o.jsx)(n.code,{children:"function"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boaobject",children:(0,o.jsx)(n.code,{children:"object"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boaoptimizer",children:(0,o.jsx)(n.code,{children:"optimizer"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boarealm",children:(0,o.jsx)(n.code,{children:"realm"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boashape",children:(0,o.jsx)(n.code,{children:"shape"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./debug_object#boalimits",children:(0,o.jsx)(n.code,{children:"limits"})})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"If there is any functionality currently missing that you think may be helpful, please feel free to submit an issue or Pull Request!"}),"\n",(0,o.jsx)(n.h2,{id:"boagc",children:(0,o.jsx)(n.code,{children:"$boa.gc"})}),"\n",(0,o.jsx)(n.p,{children:"This module contains functions that are related the garbage collector."}),"\n",(0,o.jsxs)(n.h3,{id:"function-boagccollect",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.gc.collect()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-0-none",children:"Args (0): none"}),"\n",(0,o.jsx)(n.p,{children:"This function triggers the GC to scan the heap and collect garbage."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"$boa.gc.collect()\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boafunction",children:(0,o.jsx)(n.code,{children:"$boa.function"})}),"\n",(0,o.jsx)(n.p,{children:"In this module are untility functions related to execution and debugging function."}),"\n",(0,o.jsxs)(n.h3,{id:"function-boafunctionbytecode",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.function.bytecode()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-1-target-function",children:"Args (1): target (function)"}),"\n",(0,o.jsx)(n.p,{children:"This function returns the compiled bytecode of a function as a string,"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:">> function add(x, y) {\n  return x + y\n}\n>> $boa.function.bytecode(add)\n\"\n------------------------Compiled Output: 'add'------------------------\nLocation  Count   Opcode                     Operands\n\n000000    0000    DefInitArg                 0000: 'a'\n000005    0001    DefInitArg                 0001: 'b'\n000010    0002    RestParameterPop\n000011    0003    GetName                    0000: 'a'\n000016    0004    GetName                    0001: 'b'\n000021    0005    Add\n000022    0006    Return\n000023    0007    PushUndefined\n000024    0008    Return\n\nLiterals:\n    <empty>\n\nBindings:\n    0000: a\n    0001: b\n\nFunctions:\n    <empty>\n\"\n>>\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"function-boafunctiontrace",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.function.trace()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-3-target-function-this-value-args-targets-args-values",children:"Args (3): target (function), this (value), ...args (target's args values)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"trace()"})," takes a target function, a this value, and the function's args and runs only that\nfunction as a trace."]}),"\n",(0,o.jsx)(n.p,{children:"This is perfect for isolating and tracing a single function. If the specified function calls other\nfunctions, their instructions aren't traced."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:">> const add = (a, b) => a + b\n>> $boa.function.trace(add, undefined, 1, 2)\n5\u03bcs           DefInitArg                 0000: 'a'                  2\n4\u03bcs           DefInitArg                 0001: 'b'                  <empty>\n0\u03bcs           RestParameterPop                                      <empty>\n3\u03bcs           GetName                    0000: 'a'                  1\n1\u03bcs           GetName                    0001: 'b'                  2\n2\u03bcs           Add                                                   3\n1\u03bcs           Return                                                3\n3\n>>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"this"})," value can be changed as well as the arguments that are passed to the function."]}),"\n",(0,o.jsxs)(n.h3,{id:"function-boafunctiontraceable",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.function.traceable()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-2-target-function-should_trace-bool",children:"Args (2): target (function), should_trace (bool)"}),"\n",(0,o.jsx)(n.p,{children:"Marks a single function as traceable on all future executions of the function. Both useful to mark\nseveral functions as traceable and to trace functions that suspend their execution (async functions,\ngenerators, async generators)."}),"\n",(0,o.jsx)(n.h4,{id:"input",children:"Input"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-Javascript",children:"function* g() {\n    yield 1;\n    yield 2;\n    yield 3;\n}\n$boa.function.traceable(g, true);\nvar iter = g();\niter.next();\niter.next();\niter.next();\n"})}),"\n",(0,o.jsx)(n.h4,{id:"output",children:"Output"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"1\u03bcs           RestParameterPop                                      <empty>\n1\u03bcs           PushUndefined                                         undefined\n2\u03bcs           Yield                                                 undefined\n4\u03bcs           GetName                    0000: 'a'                  1\n0\u03bcs           Yield                                                 1\n1\u03bcs           GeneratorNext                                         undefined\n1\u03bcs           Pop                                                   <empty>\n15\u03bcs          GetName                    0001: 'b'                  2\n1\u03bcs           Yield                                                 2\n1\u03bcs           GeneratorNext                                         undefined\n1\u03bcs           Pop                                                   <empty>\n4\u03bcs           GetName                    0002: 'c'                  3\n1\u03bcs           Yield                                                 3\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"function-boafunctionflowgraph",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.function.flowgraph()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-2-target-function-options-object--string",children:"Args (2): target (function), options (object | string)"}),"\n",(0,o.jsx)(n.p,{children:"It can be used to get the instruction flowgraph, like the command-line flag.\nThis works on the function level, allows getting the flow graph without\nquiting the boa shell and adding the specified flags."}),"\n",(0,o.jsx)(n.p,{children:"Besides the function it also takes an argument that, can be a string or an object.\nIf it is a string it represets the flowgraph format, otherwire if it's an object:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"// These are the defaults, if not specified.\n{\n    format: 'mermaid'\n    direction: 'LeftRight' // or 'LR' shorthand.\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"$boa.function.flowgraph(func, 'graphviz')\n$boa.function.flowgraph(func, { format: 'mermaid', direction: 'TopBottom' })\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boaobject",children:(0,o.jsx)(n.code,{children:"$boa.object"})}),"\n",(0,o.jsx)(n.p,{children:"Contains utility functions for getting internal information about an object."}),"\n",(0,o.jsxs)(n.h3,{id:"function-boaobjectid",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.object.id()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-1-target-object",children:"Args (1): target (object)"}),"\n",(0,o.jsx)(n.p,{children:"This function returns memory address of the given object, as a string."}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"let o = { x: 10, y: 20 }\n$boa.object.id(o)    // '0x7F5B3251B718'\n\n// Geting the address of the $boa object in memory\n$boa.object.id($boa) // '0x7F5B3251B5D8'\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boaoptimizer",children:(0,o.jsx)(n.code,{children:"$boa.optimizer"})}),"\n",(0,o.jsx)(n.p,{children:"This modules contains getters and setters for enabling and disabling optimizations."}),"\n",(0,o.jsxs)(n.h3,{id:"accessor-boaoptimizerconstantfolding",children:["Accessor ",(0,o.jsx)(n.code,{children:"$boa.optimizer.constantFolding"})]}),"\n",(0,o.jsxs)(n.p,{children:["This is and accessor property on the module, its getter returns ",(0,o.jsx)(n.code,{children:"true"})," if enabled or ",(0,o.jsx)(n.code,{children:"false"})," otherwise.\nIts setter can be used to enable/disable the constant folding optimization."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"$boa.optimizer.constantFolding = true\n$boa.optimizer.constantFolding // true\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"accessor-boaoptimizerstatistics",children:["Accessor ",(0,o.jsx)(n.code,{children:"$boa.optimizer.statistics"})]}),"\n",(0,o.jsxs)(n.p,{children:["This is an accessor property on the module, its getter returns ",(0,o.jsx)(n.code,{children:"true"})," if enabled or ",(0,o.jsx)(n.code,{children:"false"})," otherwise.\nIts setter can be used to enable/disable optimization statistics, which are printed to ",(0,o.jsx)(n.code,{children:"stdout"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:">> $boa.optimizer.constantFolding = true\n>> $boa.optimizer.statistics = true\n>> 1 + 1\nOptimizer {\n    constant folding: 1 run(s), 2 pass(es) (1 mutating, 1 checking)\n}\n\n2\n>>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boarealm",children:(0,o.jsx)(n.code,{children:"$boa.realm"})}),"\n",(0,o.jsx)(n.p,{children:"This module contains realm utilities to test cross-realm behaviour."}),"\n",(0,o.jsxs)(n.h3,{id:"function-boarealmcreate",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.realm.create"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-0",children:"Args (0)"}),"\n",(0,o.jsx)(n.p,{children:"Creates a new realm with a new set of builtins and returns its global object."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"let global = $boa.realm.create();\n\nObject != global.Object; // true\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boashape",children:(0,o.jsx)(n.code,{children:"$boa.shape"})}),"\n",(0,o.jsx)(n.p,{children:"This module contains helpful functions for getting information about a shape of an object."}),"\n",(0,o.jsxs)(n.h3,{id:"function-boashapeid",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.shape.id()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-1-id_target-object",children:"Args (1): id_target (object)"}),"\n",(0,o.jsx)(n.p,{children:"Returns the pointer of the object's shape in memory as a string encoded in hexadecimal format."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"$boa.shape.id(Number) // '0x7FC35A073868'\n$boa.shape.id({}) // '0x7FC35A046258'\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"function-boashapetype",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.shape.type()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-1-type_target-object",children:"Args (1): type_target (object)"}),"\n",(0,o.jsx)(n.p,{children:"Returns the object's shape type."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"$boa.shape.type({x: 3}) // 'shared'\n$boa.shape.type(Number) // 'unique'\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"function-boashapesame",children:["Function ",(0,o.jsx)(n.code,{children:"$boa.shape.same()"})]}),"\n",(0,o.jsx)(n.h4,{id:"args-2-one-object-two-object",children:"Args (2): one (object), two (object)"}),"\n",(0,o.jsxs)(n.p,{children:["Returns ",(0,o.jsx)(n.code,{children:"true"})," if both objects have the same shape."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JavaScript",children:"// The values of the properties are not important!\nlet o1 = { x: 10 }\nlet o2 = {}\n$boa.shape.same(o1, o2) // false\n\no2.x = 20\n$boa.shape.same(o1, o2) // true\n\no2.y = 200\n$boa.shape.same(o1, o2) // false\n"})}),"\n",(0,o.jsx)(n.h2,{id:"boalimits",children:(0,o.jsx)(n.code,{children:"$boa.limits"})}),"\n",(0,o.jsx)(n.p,{children:"This module contains utilities for changing runtime limits."}),"\n",(0,o.jsxs)(n.h3,{id:"accessor-boalimitsloop",children:["Accessor ",(0,o.jsx)(n.code,{children:"$boa.limits.loop"})]}),"\n",(0,o.jsx)(n.p,{children:"This is an accessor property on the module, its getter returns the loop iteration limit before an error is thrown.\nIts setter can be used to set the loop iteration limit."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"$boa.limits.loop = 10;\n\nwhile (true) {} // RuntimeLimit: Maximum loop iteration limit 10 exceeded\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"accessor-boalimitsrecursion",children:["Accessor ",(0,o.jsx)(n.code,{children:"$boa.limits.recursion"})]}),"\n",(0,o.jsx)(n.p,{children:"This is an accessor property on the module, its getter returns the recursion limit before an error is thrown.\nIts setter can be used to set the recursion limit."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"$boa.limits.recursion = 100;\n\nfunction x() {\n  return x();\n}\nx(); // RuntimeLimit: Maximum recursion limit 100 exceeded\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>s});var o=t(6540);const i={},a=o.createContext(i);function c(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);