"use strict";
(self["webpackChunkboajs_dev"] = self["webpackChunkboajs_dev"] || []).push([[1080],{

/***/ 5120:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Conformance)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(6540);
;// ./src/components/conformance/types.ts
// The main global state of the conformance page.
//
// This state is fed into the History object and dictates
// what renders.
let FilterOption=/*#__PURE__*/function(FilterOption){FilterOption["None"]="none";FilterOption["Passed"]="passed";FilterOption["Failed"]="failed";FilterOption["Ignored"]="ignored";return FilterOption;}({});// The below types are specific to test result types.
let TestOutcome=/*#__PURE__*/function(TestOutcome){TestOutcome[TestOutcome["Passed"]=0]="Passed";TestOutcome[TestOutcome["Ignored"]=1]="Ignored";TestOutcome[TestOutcome["Failed"]=2]="Failed";TestOutcome[TestOutcome["Panic"]=3]="Panic";return TestOutcome;}({});let SpecEdition=/*#__PURE__*/function(SpecEdition){SpecEdition[SpecEdition["es5"]=5]="es5";SpecEdition[SpecEdition["es6"]=6]="es6";SpecEdition[SpecEdition["es7"]=7]="es7";SpecEdition[SpecEdition["es8"]=8]="es8";SpecEdition[SpecEdition["es9"]=9]="es9";SpecEdition[SpecEdition["es10"]=10]="es10";SpecEdition[SpecEdition["es11"]=11]="es11";SpecEdition[SpecEdition["es12"]=12]="es12";SpecEdition[SpecEdition["es13"]=13]="es13";SpecEdition[SpecEdition["ESNext"]=14]="ESNext";return SpecEdition;}({});
;// ./src/components/conformance/utils.ts
// Take a search param and create a state object
function createUrlState(search){const params=new URLSearchParams(search);console.log(`testPath: ${params.get("testPath")}`);return{versionTag:params.get("version")??undefined,testPath:params.get("testPath")?.split("/")??undefined,selectedTest:params.get("selectedTest")??undefined};}function updateInitialConformanceState(urlState,conformanceState){if(conformanceState)return conformanceState;const selectedTest=urlState.testPath?urlState.selectedTest:undefined;const tagName=!urlState.versionTag&&urlState.testPath?"main":urlState.versionTag;const fetchUrl=tagName==="main"?`https://raw.githubusercontent.com/boa-dev/data/main/test262/refs/heads/main/latest.json`:`https://raw.githubusercontent.com/boa-dev/data/main/test262/refs/tags/${tagName}/latest.json`;const testPath=urlState.testPath||[];if(!tagName&&testPath.length==0&&!selectedTest)return conformanceState;return{version:{tagName,fetchUrl},testPath:[tagName,...testPath],ecmaScriptVersion:undefined,sortOption:availableSortingOptions[0].id,selectedTest:selectedTest};}function createSearchParams(version,testPath,selectedTest){const search=new URLSearchParams();search.append("version",version.tagName);if(testPath&&testPath.length>1){search.append("testPath",testPath.slice(1).join("/"));}if(selectedTest){search.append("selectedTest",selectedTest);}return search.toString();}// Creates the state object from provided args
function createState(version,testPath,ecmaScriptVersion,sortOption,filterOption,selectedTest){testPath=testPath?testPath:[version.tagName];sortOption=sortOption?sortOption:availableSortingOptions[0].id;ecmaScriptVersion=ecmaScriptVersion?ecmaScriptVersion:"";return{version,testPath,ecmaScriptVersion,sortOption,filterOption,selectedTest};}const availableSortingOptions=[{id:"alpha",name:"Alphabetical",callback:(a,b)=>a.name.localeCompare(b.name)},{id:"reverse",name:"Reverse Alpha",callback:(a,b)=>-a.name.localeCompare(b.name)},{id:"most-passed",name:"Most Passed",callback:(a,b)=>b.stats.passed-a.stats.passed},{id:"least-passed",name:"Least Passed",callback:(a,b)=>a.stats.passed-b.stats.passed},{id:"most-pass-percentage",name:"Most Passed (%)",callback:(a,b)=>{const p1=a.stats.passed/a.stats.total;const p2=b.stats.passed/b.stats.total;return p1===p2?b.stats.total-a.stats.total:p2-p1;}},{id:"least-pass-percentage",name:"Least Passed (%)",callback:(a,b)=>{const p1=a.stats.passed/a.stats.total;const p2=b.stats.passed/b.stats.total;return p1===p2?b.stats.total-a.stats.total:p1-p2;}},{id:"most-ignored",name:"Most Ignored",callback:(a,b)=>b.stats.ignored-a.stats.ignored},{id:"least-ignored",name:"Least Ignored",callback:(a,b)=>a.stats.ignored-b.stats.ignored},{id:"most-fail",name:"Most Failed",callback:(a,b)=>b.stats.total-(b.stats.passed+b.stats.ignored)-(a.stats.total-(a.stats.passed+a.stats.ignored))},{id:"least-fail",name:"Least Failed",callback:(a,b)=>a.stats.total-(a.stats.passed+a.stats.ignored)-(b.stats.total-(b.stats.passed+b.stats.ignored))},{id:"most-fail-percentage",name:"Most Failed (%)",callback:(a,b)=>{const p1=(b.stats.passed+b.stats.ignored)/b.stats.total;const p2=(a.stats.passed+a.stats.ignored)/a.stats.total;return p2===p1?b.stats.total-a.stats.total:p2-p1;}},{id:"least-fail-percentage",name:"Least Failed (%)",callback:(a,b)=>{const p1=(b.stats.passed+b.stats.ignored)/b.stats.total;const p2=(a.stats.passed+a.stats.ignored)/a.stats.total;return p2===p1?b.stats.total-a.stats.total:p1-p2;}}];// Interface for the http response of boa_tester's `ResultInfo`
// Function for converting an http response of boa_tester's `ResultInfo` to ResultInfo
function mapToResultInfo(version,unmappedValue){return{version,commit:unmappedValue.c,test262Commit:unmappedValue.u,results:mapToSuiteResult(unmappedValue.r)};}// Interface for the http response of boa_tester's `SuiteResult`
// Function for converting an http response of boa_tester's `SuiteResult` to SuiteResult
function mapToSuiteResult(unmappedValue){const suiteResult={name:unmappedValue.n,stats:mapToTestStats(unmappedValue.a)};if(unmappedValue.av){suiteResult["versionedStats"]=mapToVersionedStats(unmappedValue.av);}if(unmappedValue.s){suiteResult["suites"]=unmappedValue.s.map(suite=>mapToSuiteResult(suite));}if(unmappedValue.t){suiteResult["tests"]=unmappedValue.t.map(test=>mapToTestResult(test));}if(unmappedValue.f){suiteResult["features"]=Array(unmappedValue.f);}return suiteResult;}// Interface for the http response of boa_tester's `Statistics`
// Function for converting an http response of boa_tester's `Statistics` to `TestStats`
function mapToTestStats(unmappedValue){return{total:unmappedValue.t,passed:unmappedValue.o,ignored:unmappedValue.i,panic:unmappedValue.p};}// Interface for the http response of boa_tester's versioned `Statistics`
// Function for converting an http response of boa_tester's versioned `Statistics` to `VersionedStats`
function mapToVersionedStats(unmappedValue){return{es5:mapToTestStats(unmappedValue.es5),es6:mapToTestStats(unmappedValue.es6),es7:mapToTestStats(unmappedValue.es7),es8:mapToTestStats(unmappedValue.es8),es9:mapToTestStats(unmappedValue.es9),es10:mapToTestStats(unmappedValue.es10),es11:mapToTestStats(unmappedValue.es11),es12:mapToTestStats(unmappedValue.es12),es13:mapToTestStats(unmappedValue.es13)};}// Interface for the http response of boa_tester's `TestResult`
// Function for converting an http response of boa_tester's `TestResult` to TestResult
function mapToTestResult(unmappedValue){return{name:unmappedValue.n,edition:mapToSpecEditionEnum(unmappedValue.v),strict:Boolean(unmappedValue.s),result:mapToTestOutcomeEnum(unmappedValue.r)};}function mapToSpecEditionEnum(unmappedValue){switch(Number(unmappedValue)){case 5:return SpecEdition.es5;case 6:return SpecEdition.es6;case 7:return SpecEdition.es7;case 8:return SpecEdition.es8;case 9:return SpecEdition.es9;case 10:return SpecEdition.es10;case 11:return SpecEdition.es11;case 12:return SpecEdition.es12;case 13:return SpecEdition.es13;default:return SpecEdition.ESNext;}}function mapToTestOutcomeEnum(unmappedValue){switch(String(unmappedValue)){case"O":return TestOutcome.Passed;case"I":return TestOutcome.Ignored;case"P":return TestOutcome.Panic;default:return TestOutcome.Failed;}}
// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js
var react_router = __webpack_require__(6347);
// EXTERNAL MODULE: ./node_modules/@docusaurus/theme-classic/lib/theme/Heading/index.js + 1 modules
var Heading = __webpack_require__(1107);
;// ./src/components/conformance/HeroBanner/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const styles_module = ({"bannerSection":"bannerSection_ggv5","cardContainer":"cardContainer_hFQm"});
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(4848);
;// ./src/components/conformance/HeroBanner/index.tsx
function ConformanceHeroBanner(props){return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.bannerSection,children:props.focusItems.map(item=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(BannerCard,{item:item},item.tagName);})});}function BannerCard(props){const[stats,setStats]=react.useState(null);const history=(0,react_router/* useHistory */.W6)();react.useEffect(()=>{const fetchStats=async()=>{const response=await fetch(props.item.fetchUrl);const results=await response.json();return results.r.a;};fetchStats().then(data=>setStats(mapToTestStats(data)));},[]);return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.cardContainer,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"card",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"card__header",children:props.item.tagName==="main"?/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h3",children:"main Branch Results"}):/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h3",children:"Release "+props.item.tagName+" Results"})}),stats?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"card__body",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{children:"Total: "+stats.total})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"Passed: "+stats.passed})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{color:"var(--ifm-color-warning)"},children:"Ignored: "+stats.ignored})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{color:"var(--ifm-color-danger)"},children:"Failed: "+(stats.total-stats.passed-stats.ignored)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{color:"var(--ifm-color-danger)"},children:"\u26A0Panics: "+stats.panic+"\u26A0"})})]}):null,/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"card__footer",children:/*#__PURE__*/(0,jsx_runtime.jsx)("button",{className:"button button--block button--primary",onClick:()=>history.push({search:createSearchParams(props.item),pathname:"/conformance",state:createState(props.item)}),children:"View Results"})})]})});}
;// ./src/components/conformance/ResultsDisplay/components/SuiteSelector/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const SuiteSelector_styles_module = ({"suiteSelector":"suiteSelector_IaVZ","suiteCard":"suiteCard_kP4J","suiteCardTitle":"suiteCardTitle_aqXE","suiteCardResults":"suiteCardResults_cmIK"});
;// ./src/components/conformance/ResultsDisplay/components/SuiteSelector/index.tsx
function SuiteSelector(props){const option=availableSortingOptions.filter(v=>v.id===props.state.sortOption);return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:SuiteSelector_styles_module.suiteSelector,children:props.suites.toSorted(option[0].callback).filter(suite=>{const stats=suite.versionedStats?.[props.state.ecmaScriptVersion]??suite.stats;return stats.total!==0;}).map(suite=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(SuiteItem,{suite:suite,esFlag:props.state.ecmaScriptVersion,filterOption:props.state.filterOption??FilterOption.None,navigateToSuite:props.navigateToSuite},suite.name);})});}function SuiteItem(props){return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:SuiteSelector_styles_module.suiteCard,onClick:()=>props.navigateToSuite(props.suite.name),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:SuiteSelector_styles_module.suiteCardTitle,children:/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:props.suite.name})}),/*#__PURE__*/(0,jsx_runtime.jsx)(SuiteStatistics,{testResults:props.esFlag?props.suite.versionedStats?.[props.esFlag]??props.suite.stats:props.suite.stats,filterOption:props.filterOption})]});}function SuiteStatistics({testResults,filterOption}){const[filter,setFilter]=react.useState(filterOption);react.useEffect(()=>{setFilter(filterOption);},[filterOption]);let passed=filter==FilterOption.None||filter==FilterOption.Passed?testResults.passed:0;let ignored=filter==FilterOption.None||filter==FilterOption.Ignored?testResults.ignored:0;let failed=filter==FilterOption.None||filter==FilterOption.Failed?`${testResults.total-testResults.passed-testResults.ignored} (${testResults.panic}\u26A0)`:0;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:SuiteSelector_styles_module.suiteCardResults,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{style:{color:"var(--ifm-color-success)"},children:[passed," "]}),"/"," ",/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{style:{color:"var(--ifm-color-warning)"},children:[ignored," "]}),"/"," ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{color:"var(--ifm-color-danger)"},children:failed})]})});}
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/cards/TestGrid/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const TestGrid_styles_module = ({"testGridCard":"testGridCard_qvsW","testGridHeader":"testGridHeader_XQvU","gridStyle":"gridStyle_FWR9","testGridItem":"testGridItem_EKGp","passed":"passed_lYFG","ignored":"ignored_JJaN","failed":"failed_jtUl"});
// EXTERNAL MODULE: ./node_modules/clsx/dist/clsx.mjs
var clsx = __webpack_require__(4164);
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/cards/TestGrid/index.tsx
function TestsGrid(props){const[hoverName,setHoverName]=react.useState();const cardBodyClass="card__body "+TestGrid_styles_module.gridStyle;const title=hoverName?"Test: "+hoverName:"Suite: "+props.suite.name;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TestGrid_styles_module.testGridCard,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"card",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:(0,clsx/* default */.A)("card__header",TestGrid_styles_module.testGridHeader),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h3",children:title})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:cardBodyClass,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Grid,{tests:props.suite.tests,esFlag:props.state.ecmaScriptVersion,filterOption:props.state.filterOption,selectTest:props.selectTest,setHoverValue:name=>setHoverName(name)})})]})});}function applyFilter(filter,outcome){switch(filter){case FilterOption.Passed:return outcome==TestOutcome.Passed;case FilterOption.Ignored:return outcome==TestOutcome.Ignored;case FilterOption.Failed:return outcome==TestOutcome.Failed||outcome==TestOutcome.Panic;default:return true;}}function Grid(props){return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:props.esFlag?props.tests.filter(test=>test.edition<=SpecEdition[props.esFlag]).filter(test=>applyFilter(props.filterOption,test.result)).map(test=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(GridItem,{test:test,selectTest:props.selectTest,setHoverValue:props.setHoverValue},test.strict?test.name+"-strict":test.name);}):props.tests.filter(test=>applyFilter(props.filterOption,test.result)).map(test=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(GridItem,{test:test,selectTest:props.selectTest,setHoverValue:props.setHoverValue},test.strict?test.name+"-strict":test.name);})});}function GridItem(props){let testResult;switch(props.test.result){case TestOutcome.Passed:testResult=TestGrid_styles_module.testGridItem+" "+TestGrid_styles_module.passed;break;case TestOutcome.Ignored:testResult=TestGrid_styles_module.testGridItem+" "+TestGrid_styles_module.ignored;break;default:testResult=TestGrid_styles_module.testGridItem+" "+TestGrid_styles_module.failed;}return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:testResult,onClick:()=>props.selectTest(props.test.name+".js"),onMouseEnter:()=>props.setHoverValue(props.test.name+".js"),onMouseLeave:()=>props.setHoverValue(undefined),"aria-label":props.test.name,title:props.test.strict?"(strict) "+props.test.name+".js":props.test.name+".js"})});}
// EXTERNAL MODULE: ./node_modules/@docusaurus/core/lib/client/exports/Link.js
var Link = __webpack_require__(8774);
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/cards/TestViewer/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const TestViewer_styles_module = ({"testViewerCard":"testViewerCard_Hw2J","editorContainer":"editorContainer_NG8N","testTitle":"testTitle_Pk2w","headerOptions":"headerOptions_bMa0","testEditor":"testEditor_JfxJ"});
// EXTERNAL MODULE: ./node_modules/@monaco-editor/react/dist/index.mjs + 11 modules
var dist = __webpack_require__(8553);
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/cards/TestViewer/index.tsx
function TestViewer(props){const[testContent,setTestContent]=react.useState(null);// path constants
const tc39raw="https://raw.githubusercontent.com/tc39/test262/";const tc39Home="https://github.com/tc39/test262/blob/main/";react.useEffect(()=>{const fetchRaw=async requestPath=>{const response=await fetch(requestPath);return await response.text();};const filePath=props.t262Path+"/"+props.testName;const fullPath=tc39raw+filePath;fetchRaw(fullPath).then(data=>setTestContent(data));},[props.testName]);const generateLink=()=>{const pathValues=props.t262Path.split("/");const trimmedPath=pathValues.slice(1,pathValues.length).join("/");return tc39Home+trimmedPath+"/"+props.testName;};return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TestViewer_styles_module.testViewerCard,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"card",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"card__header",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h3",className:TestViewer_styles_module.testTitle,children:"Test: "+props.testName}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:TestViewer_styles_module.headerOptions,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("button",{className:"button button--primary button--sm",onClick:props.backToGrid,children:"Back"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.A,{to:generateLink(),children:"Visit Repo"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"card__body",style:{overflow:"auto"},children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TestViewer_styles_module.editorContainer,children:/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Editor */.KE,{className:TestViewer_styles_module.testEditor,theme:"vs-dark",language:"javascript",options:{minimap:{enabled:false}},value:testContent})})})]})});}
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const SuiteDataContainer_styles_module = ({"dataContainer":"dataContainer_B1Vt"});
;// ./src/components/conformance/ResultsDisplay/components/SuiteDataContainer/index.tsx
function SuiteDataContainer(props){// Set the user's selected test to be displayed in the ViewPort.
const selectTest=testName=>{props.setSelectedTest(testName);};const clearTest=()=>{props.setSelectedTest(undefined);};// Add a TestViewer to look up and display the test262.
return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:SuiteDataContainer_styles_module.dataContainer,children:props.state.selectedTest?/*#__PURE__*/(0,jsx_runtime.jsx)(TestViewer,{testName:props.state.selectedTest,t262Path:props.t262Path,backToGrid:()=>clearTest()}):/*#__PURE__*/(0,jsx_runtime.jsx)(TestsGrid,{...props,selectTest:selectTest})});}
;// ./src/components/conformance/ResultsDisplay/components/SuiteDisplay/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const SuiteDisplay_styles_module = ({"suiteDisplay":"suiteDisplay__VqN"});
;// ./src/components/conformance/ResultsDisplay/components/SuiteDisplay/index.tsx
function SuiteDisplay(props){return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:SuiteDisplay_styles_module.suiteDisplay,children:[props.currentSuite.suites?/*#__PURE__*/(0,jsx_runtime.jsx)(SuiteSelector,{state:props.state,suites:props.currentSuite.suites,navigateToSuite:props.navigateToSuite}):null,props.currentSuite.tests?/*#__PURE__*/(0,jsx_runtime.jsx)(SuiteDataContainer,{state:props.state,suite:props.currentSuite,t262Path:props.t262Path,setSelectedTest:props.setSelectedTest}):null]});}
;// ./src/components/conformance/ResultsDisplay/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const ResultsDisplay_styles_module = ({"resultsDisplay":"resultsDisplay_Mrfa","resultsNav":"resultsNav_Dp3n","navSection":"navSection_Alop","navLink":"navLink_t6a5","dropdownContainer":"dropdownContainer_HXCv"});
;// ./src/components/conformance/ResultsDisplay/nav.tsx
function ResultNavigation(props){return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.resultsNav,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.navSection,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(EcmaScriptVersionDropdown,{setEcmaScriptFlag:props.setEcmaScriptFlag,esVersionValue:props.state.ecmaScriptVersion}),/*#__PURE__*/(0,jsx_runtime.jsx)(SortingDropdown,{sortValue:props.state.sortOption,setSortOption:props.setSortOption}),/*#__PURE__*/(0,jsx_runtime.jsx)(FilterDropdown,{filterOption:props.state.filterOption,setFilterOption:props.setFilterOption})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:ResultsDisplay_styles_module.navSection,children:/*#__PURE__*/(0,jsx_runtime.jsx)(NavBreadCrumbs,{navPath:props.state.testPath,sliceNavToIndex:props.sliceNavToIndex})})]});}function NavBreadCrumbs(props){return/*#__PURE__*/(0,jsx_runtime.jsx)("nav",{"aria-label":"breadcrumbs",style:{padding:"0.5em"},children:/*#__PURE__*/(0,jsx_runtime.jsx)("ul",{className:"breadcrumbs",children:props.navPath.map((pathItem,idx,arr)=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(BreadCrumbItem,{itemName:pathItem,index:idx,sliceNavToIndex:props.sliceNavToIndex,breadcrumbValue:idx+1===arr.length?"breadcrumbs__item breadcrumbs__item--active":"breadcrumbs__item"},pathItem);})})});}function BreadCrumbItem(props){return/*#__PURE__*/(0,jsx_runtime.jsx)("li",{className:props.breadcrumbValue,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Link/* default */.A,{className:ResultsDisplay_styles_module.navLink,onClick:()=>props.sliceNavToIndex(props.index+1),children:props.itemName})});}// Below implements the ECMAScript Version Dropdown component
function EcmaScriptVersionDropdown(props){const[dropdownValue,setDropdownValue]=react.useState(props.esVersionValue?props.esVersionValue:"");// Update the flag when props.esVersionValue is changed
react.useEffect(()=>{setDropdownValue(props.esVersionValue);},[props.esVersionValue]);const handleVersionSelection=e=>{// Update the display value and set the flag.
setDropdownValue(e.target.value);props.setEcmaScriptFlag(e.target.value);};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.dropdownContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h4",style:{padding:"0.125rem 0.5rem",height:"5"},children:"ES Version:"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("select",{value:dropdownValue,onChange:handleVersionSelection,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:"",children:"All"}),Object.keys(SpecEdition).filter(v=>isNaN(Number(v))).map(key=>{return/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:key,children:key},key);})]})]});}function SortingDropdown(props){const[sortValue,setSortValue]=react.useState(props.sortValue?props.sortValue:"alpha");react.useEffect(()=>{setSortValue(props.sortValue);},[props.sortValue]);const handleSortSelection=e=>{setSortValue(e.target.value);const option=availableSortingOptions.filter(v=>v.id===e.target.value);props.setSortOption(option[0].id);};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.dropdownContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h4",style:{padding:"0.125rem 0.5rem",height:"5"},children:"Sort:"}),/*#__PURE__*/(0,jsx_runtime.jsx)("select",{value:sortValue,onChange:handleSortSelection,children:availableSortingOptions.map(key=>{return/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:key.id,children:key.name},key.id);})})]});}function FilterDropdown(props){const[filterValue,setFilterValue]=react.useState(props.filterOption??FilterOption.None);react.useEffect(()=>{setFilterValue(props.filterOption);},[props.filterOption]);const handlefilterSelection=e=>{setFilterValue(e.target.value);props.setFilterOption(e.target.value);};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.dropdownContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Heading/* default */.A,{as:"h4",style:{padding:"0.125rem 0.5rem",height:"5"},children:"Filter:"}),/*#__PURE__*/(0,jsx_runtime.jsx)("select",{value:filterValue,onChange:handlefilterSelection,children:Object.values(FilterOption).map(key=>{return/*#__PURE__*/(0,jsx_runtime.jsx)("option",{value:key,children:key},key);})})]});}
;// ./src/components/conformance/ResultsDisplay/index.tsx
function ResultsDisplay(props){const[currentSuite,setCurrentSuite]=react.useState(null);// Refs
const activeResults=react.useRef(undefined);// History handling
const history=(0,react_router/* useHistory */.W6)();const pushStateToHistory=(search,state)=>{history.push({pathname:"/conformance",search,state});};react.useEffect(()=>{// If the version is correctly synced
if(props.state.version.tagName!==activeResults.current?.version){updateActiveResults().then(results=>{activeResults.current=results;const foundSuite=findResultsFromPath(results);setCurrentSuite(foundSuite);});// Return to prevent further execution.
return;}// TODO / NOTE: there may be a bug with version swapping. TBD.
// Return early if for some reason activeResults.current is undefined
if(!activeResults.current)return;// Results should be defined from the check on activeResults.current
const foundSuite=findResultsFromPath(activeResults.current);setCurrentSuite(foundSuite);},[props.state]);// Fetches the version results
const fetchResults=async version=>{const response=await fetch(version.fetchUrl);return await response.json();};const updateActiveResults=async()=>{const data=await fetchResults(props.state.version);return mapToResultInfo(props.state.version.tagName,data);};const findResultsFromPath=activeResultsInfo=>{let newSuiteTarget=undefined;for(const target of props.state.testPath){if(target===props.state.version.tagName){newSuiteTarget=activeResultsInfo.results;continue;}// Suites must exist here for the path value to be valid.
for(const suite of newSuiteTarget.suites){if(suite.name===target){newSuiteTarget=suite;}}}return newSuiteTarget;};// Navigates to a suite by adding the SuiteName to the test path array.
const navigateToSuite=newSuiteName=>{const newPath=[...props.state.testPath,newSuiteName];pushStateToHistory(createSearchParams(props.state.version,newPath),createState(props.state.version,newPath,props.state.ecmaScriptVersion,props.state.sortOption,props.state.filterOption));};// Removes a value or values from the test path array.
//
// Used by breadcrumbs for navigation.
const sliceNavToIndex=nonInclusiveIndex=>{const slicedPath=[...props.state.testPath.slice(0,nonInclusiveIndex)];pushStateToHistory(createSearchParams(props.state.version,slicedPath),createState(props.state.version,slicedPath,props.state.ecmaScriptVersion,props.state.sortOption,props.state.filterOption));};// Sets the ECMAScript version flag value.
const setEcmaScriptFlag=flag=>{const nulledFlag=flag?flag:undefined;pushStateToHistory(createSearchParams(props.state.version,props.state.testPath,props.state.selectedTest),createState(props.state.version,props.state.testPath,nulledFlag,props.state.sortOption,props.state.filterOption));};// Sets the sorting option
const setSortOption=option=>{pushStateToHistory(createSearchParams(props.state.version,props.state.testPath,props.state.selectedTest),createState(props.state.version,props.state.testPath,props.state.ecmaScriptVersion,option,props.state.filterOption));};// Sets the filter option.
//
// This filters the tests shown in the selection cards and tests grid
const setFilterOption=option=>{pushStateToHistory(createSearchParams(props.state.version,props.state.testPath,props.state.selectedTest),createState(props.state.version,props.state.testPath,props.state.ecmaScriptVersion,props.state.sortOption,option));};// Sets a selected test.
const setSelectedTest=test=>{pushStateToHistory(createSearchParams(props.state.version,props.state.testPath,test),createState(props.state.version,props.state.testPath,props.state.ecmaScriptVersion,props.state.sortOption,props.state.filterOption,test));};// Create the t262 URL from testPath with the results commit
const t262Path=()=>{// NOTE: testPath[0] === activeBoaReleaseTag
return[activeResults.current.test262Commit,"test",...props.state.testPath.slice(1,props.state.testPath.length)].join("/");};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:ResultsDisplay_styles_module.resultsDisplay,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(ResultNavigation,{state:props.state,sliceNavToIndex:sliceNavToIndex,setEcmaScriptFlag:setEcmaScriptFlag,setSortOption:setSortOption,setFilterOption:setFilterOption}),currentSuite?/*#__PURE__*/(0,jsx_runtime.jsx)(SuiteDisplay,{state:props.state,currentSuite:currentSuite,t262Path:t262Path(),navigateToSuite:navigateToSuite,setSelectedTest:test=>setSelectedTest(test)}):null]});}
;// ./src/components/conformance/VersionSelector/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const VersionSelector_styles_module = ({"versionSelector":"versionSelector_Jach","versionCard":"versionCard_H8dz","versionTitle":"versionTitle_Fy_5"});
;// ./src/components/conformance/VersionSelector/index.tsx
function VersionSelector(props){return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:VersionSelector_styles_module.versionSelector,children:props.availableVersions.map(version=>{return/*#__PURE__*/(0,jsx_runtime.jsx)(Version,{version:version},version.tagName);})});}function Version(props){const history=(0,react_router/* useHistory */.W6)();return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:VersionSelector_styles_module.versionCard,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:VersionSelector_styles_module.versionTitle,children:/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:"Release: "+props.version.tagName})}),/*#__PURE__*/(0,jsx_runtime.jsx)("button",{className:"button button--primary button--sm",onClick:()=>history.push({pathname:"/conformance",search:createSearchParams(props.version),state:createState(props.version)}),children:"View Results"})]});}
;// ./src/components/conformance/index.tsx
function ConformanceView(props){return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(VersionSelector,{availableVersions:props.records}),props.state?/*#__PURE__*/(0,jsx_runtime.jsx)(ResultsDisplay,{state:props.state},props.state.version.tagName):/*#__PURE__*/(0,jsx_runtime.jsx)(ConformanceHeroBanner,{focusItems:props.records.slice(0,2)})]});}
// EXTERNAL MODULE: ./node_modules/@docusaurus/theme-classic/lib/theme/Layout/index.js + 71 modules
var Layout = __webpack_require__(9139);
;// ./src/pages/conformance/styles.module.css
// extracted by mini-css-extract-plugin
/* harmony default export */ const conformance_styles_module = ({"mainLayout":"mainLayout_xlEm"});
;// ./src/pages/conformance/index.tsx
// Note there are other fields, but only adding the ones that are needed.
// TODO: Add header file to speed up statisic fetching for initial render?
function Conformance(){const location=(0,react_router/* useLocation */.zy)();const[releaseRecords,setReleaseRecords]=react.useState(null);const urlState=createUrlState(location.search);const resolvedState=updateInitialConformanceState(urlState,location.state);// Initial Render useEffect
react.useEffect(()=>{const validateReleaseVersion=releaseTag=>{const version=releaseTag.split(".");// Check if correct version tag is present and major release is 1+
const versionTagValidated=version[0].includes("v")&&parseInt(version[0].replace("v",""))>0;return versionTagValidated||10<=parseInt(version[1]);};const fetchReleases=async()=>{const response=await fetch("https://api.github.com/repos/boa-dev/boa/releases");const releases=await response.json();const releasesArray=Array.isArray(releases)?releases:[];return releasesArray.filter(potentialRelease=>validateReleaseVersion(potentialRelease.tag_name)).map(release=>{return{tagName:release.tag_name,fetchUrl:`https://raw.githubusercontent.com/boa-dev/data/main/test262/refs/tags/${release.tag_name}/latest.json`};});};const mainVersion={tagName:"main",fetchUrl:`https://raw.githubusercontent.com/boa-dev/data/main/test262/refs/heads/main/latest.json`};fetchReleases().then(releases=>setReleaseRecords([mainVersion,...releases]));},[]);return/*#__PURE__*/(0,jsx_runtime.jsx)(Layout/* default */.A,{title:"Conformance",description:"Boa Conformance Page",children:/*#__PURE__*/(0,jsx_runtime.jsx)("main",{className:conformance_styles_module.mainLayout,children:releaseRecords?/*#__PURE__*/(0,jsx_runtime.jsx)(ConformanceView,{state:resolvedState,records:releaseRecords}):null})});}

/***/ })

}]);